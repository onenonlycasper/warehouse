
                (function($) {
            (function(){function aa(){return function(){}}function l(a){return function(){return this[a]}}function ca(a){return function(){return a}}var r,t=this;function da(a){a=a.split(".");for(var b=t,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){return void 0!==a}function v(a){return"array"==ea(a)}function w(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function x(a){return"string"==typeof a}function fa(a){return"boolean"==typeof a}function z(a){return"number"==typeof a}function ga(a){return"function"==ea(a)}function A(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ha(a){return a[ia]||(a[ia]=++ka)}
var ia="closure_uid_"+(1E9*Math.random()>>>0),ka=0;function la(a,b,c){return a.call.apply(a.bind,arguments)}function ma(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function B(a,b,c){B=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?la:ma;return B.apply(null,arguments)}function na(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var oa=Date.now||function(){return+new Date};
function C(a,b){var c=a.split("."),d=t;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function E(a,b){function c(){}c.prototype=b.prototype;a.A=b.prototype;a.prototype=new c};function pa(a){Error.captureStackTrace?Error.captureStackTrace(this,pa):this.stack=Error().stack||"";a&&(this.message=String(a))}E(pa,Error);pa.prototype.name="CustomError";function qa(a,b){for(var c=1;c<arguments.length;c++){var d=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,d)}return a}function ra(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function sa(a){if(!ta.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ua,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(va,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(wa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(xa,"&quot;"));return a}var ua=/&/g,va=/</g,wa=/>/g,xa=/\"/g,ta=/[&<>\"]/;
function ya(a){return ra(a.replace(/  /g," &#160;"),void 0)}function za(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var Aa={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Ba={"'":"\\'"};
function Ca(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=b,g=c+1,h;if(!(h=Aa[d])){if(!(31<e&&127>e))if(d in Ba)d=Ba[d];else if(d in Aa)d=Ba[d]=Aa[d];else{e=d;h=d.charCodeAt(0);if(31<h&&127>h)e=d;else{if(256>h){if(e="\\x",16>h||256<h)e+="0"}else e="\\u",4096>h&&(e+="0");e+=h.toString(16).toUpperCase()}d=Ba[d]=e}h=d}f[g]=h}b.push('"');return b.join("")};function Da(a,b){b.unshift(a);pa.call(this,qa.apply(null,b));b.shift()}E(Da,pa);Da.prototype.name="AssertionError";function Ea(a,b){throw new Da("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var Fa=Array.prototype,Ga=Fa.indexOf?function(a,b,c){return Fa.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(x(a))return x(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ha=Fa.forEach?function(a,b,c){Fa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ia=Fa.map?function(a,b,c){return Fa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=
x(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e};function Ka(a,b){if(a.reduce)return a.reduce(b,0);var c=0;Ha(a,function(d,e){c=b.call(void 0,c,d,e,a)});return c}var La=Fa.some?function(a,b,c){return Fa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Ma(a,b){var c=Na(a,b,void 0);return 0>c?null:x(a)?a.charAt(c):a[c]}
function Na(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Oa(a){if(!v(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Pa(a,b){var c=Ga(a,b),d;(d=0<=c)&&Fa.splice.call(a,c,1);return d}function Qa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Ra(a,b,c){return 2>=arguments.length?Fa.slice.call(a,b):Fa.slice.call(a,b,c)}
function Sa(a,b){if(!w(a)||!w(b)||a.length!=b.length)return!1;for(var c=a.length,d=Ta,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function Ta(a,b){return a===b};function Ua(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Va(a,b){for(var c=w(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],u(a));c++);return a}var Wa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xa(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Wa.length;f++)c=Wa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Ya="StopIteration"in t?t.StopIteration:Error("StopIteration");function Za(){}Za.prototype.a=function(){throw Ya;};Za.prototype.ma=function(){return this};function $a(a){if(a instanceof Za)return a;if("function"==typeof a.ma)return a.ma(!1);if(w(a)){var b=0,c=new Za;c.a=function(){for(;;){if(b>=a.length)throw Ya;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function ab(a,b,c){if(w(a))try{Ha(a,b,c)}catch(d){if(d!==Ya)throw d;}else{a=$a(a);try{for(;;)b.call(c,a.a(),void 0,a)}catch(e){if(e!==Ya)throw e;}}}function bb(a){if(w(a))return Qa(a);a=$a(a);var b=[];ab(a,function(a){b.push(a)});return b};function cb(a,b){this.c={};this.a=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)db(this,arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof cb)e=a.fa(),d=a.cb();else{var c=[],f=0;for(e in a)c[f++]=e;e=c;c=[];f=0;for(d in a)c[f++]=a[d];d=c}for(c=0;c<e.length;c++)db(this,e[c],d[c])}}r=cb.prototype;r.p=0;r.eb=0;r.Da=l("p");r.cb=function(){eb(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.c[this.a[b]]);return a};
r.fa=function(){eb(this);return this.a.concat()};r.clear=function(){this.c={};this.eb=this.p=this.a.length=0};function eb(a){if(a.p!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Object.prototype.hasOwnProperty.call(a.c,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.p!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Object.prototype.hasOwnProperty.call(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}
function db(a,b,c){Object.prototype.hasOwnProperty.call(a.c,b)||(a.p++,a.a.push(b),a.eb++);a.c[b]=c}r.Ba=function(){return new cb(this)};r.ma=function(a){eb(this);var b=0,c=this.a,d=this.c,e=this.eb,f=this,g=new Za;g.a=function(){for(;;){if(e!=f.eb)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw Ya;var g=c[b++];return a?g:d[g]}};return g};var fb,gb,hb,ib;function jb(){return t.navigator?t.navigator.userAgent:null}ib=hb=gb=fb=!1;var kb;if(kb=jb()){var lb=t.navigator;fb=0==kb.indexOf("Opera");gb=!fb&&-1!=kb.indexOf("MSIE");hb=!fb&&-1!=kb.indexOf("WebKit");ib=!fb&&!hb&&"Gecko"==lb.product}var mb=fb,F=gb,nb=ib,ob=hb;function pb(){var a=t.document;return a?a.documentMode:void 0}var qb;
a:{var rb="",sb;if(mb&&t.opera)var tb=t.opera.version,rb="function"==typeof tb?tb():tb;else if(nb?sb=/rv\:([^\);]+)(\)|;)/:F?sb=/MSIE\s+([^\);]+)(\)|;)/:ob&&(sb=/WebKit\/(\S+)/),sb)var ub=sb.exec(jb()),rb=ub?ub[1]:"";if(F){var vb=pb();if(vb>parseFloat(rb)){qb=String(vb);break a}}qb=rb}var wb={};
function xb(a){var b;if(!(b=wb[a])){b=0;for(var c=String(qb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",k=/(\d*)(\D*)/g,m=/(\d*)(\D*)/g;do{var n=k.exec(g)||["","",""],p=m.exec(h)||["","",""];if(0==n[0].length&&0==p[0].length)break;b=((0==n[1].length?0:parseInt(n[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==n[1].length?0:parseInt(n[1],10))>(0==p[1].length?
0:parseInt(p[1],10))?1:0)||((0==n[2].length)<(0==p[2].length)?-1:(0==n[2].length)>(0==p[2].length)?1:0)||(n[2]<p[2]?-1:n[2]>p[2]?1:0)}while(0==b)}b=wb[a]=0<=b}return b}var yb=t.document,Ab=yb&&F?pb()||("CSS1Compat"==yb.compatMode?parseInt(qb,10):5):void 0;function Cb(a){return Db(a||arguments.callee.caller,[])}
function Db(a,b){var c=[];if(0<=Ga(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Eb(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Eb(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Db(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Eb(a){if(Fb[a])return Fb[a];a=String(a);if(!Fb[a]){var b=/function ([^\(]+)/.exec(a);Fb[a]=b?b[1]:"[Anonymous]"}return Fb[a]}var Fb={};function Gb(a,b,c,d,e){"number"==typeof e||Hb++;this.g=d||oa();this.f=a;this.e=b;this.d=c;delete this.c;delete this.a}Gb.prototype.c=null;Gb.prototype.a=null;var Hb=0;function Ib(a){this.f=a}Ib.prototype.d=null;Ib.prototype.c=null;Ib.prototype.e=null;Ib.prototype.a=null;function Jb(a,b){this.name=a;this.value=b}Jb.prototype.toString=l("name");var Kb=new Jb("SHOUT",1200),Lb=new Jb("SEVERE",1E3),Mb=new Jb("WARNING",900),Nb=new Jb("INFO",800),Ob=new Jb("CONFIG",700),Pb=new Jb("FINE",500),Qb=new Jb("FINER",400),Rb=new Jb("FINEST",300),Tb=[new Jb("OFF",Infinity),Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,new Jb("ALL",0)],Ub=null;Ib.prototype.getName=l("f");
function Vb(a){if(a.c)return a.c;if(a.d)return Vb(a.d);Ea("Root logger has no level set.");return null}Ib.prototype.log=function(a,b,c){if(a.value>=Vb(this).value)for(a=this.g(a,b,c),b="log:"+a.e,t.console&&(t.console.timeStamp?t.console.timeStamp(b):t.console.markTimeline&&t.console.markTimeline(b)),t.msWriteProfilerMark&&t.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.a)for(var e=0,f=void 0;f=c.a[e];e++)f(d);b=b.d}};
Ib.prototype.g=function(a,b,c){var d=new Gb(a,String(b),this.f);if(c){d.c=c;var e;var f=arguments.callee.caller;try{var g;var h=da("window.location.href");if(x(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};else{var k,m,n=!1;try{k=c.lineNumber||c.Zc||"Not available"}catch(p){k="Not available",n=!0}try{m=c.fileName||c.filename||c.sourceURL||t.$googDebugFname||h}catch(s){m="Not available",n=!0}g=!n&&c.lineNumber&&c.fileName&&c.stack?c:{message:c.message,
name:c.name,lineNumber:k,fileName:m,stack:c.stack||"Not available"}}e="Message: "+sa(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+sa(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+sa(Cb(f)+"-> ")}catch(q){e="Exception trying to expose exception! You win, we lose. "+q}d.a=e}return d};function Wb(a,b){a.log(Lb,b,void 0)}function G(a,b){a.log(Mb,b,void 0)}function Xb(a,b){a.log(Pb,b,void 0)}
function H(a,b){a.log(Qb,b,void 0)}function I(a,b){a.log(Rb,b,void 0)}var Yb={},Zb=null;function $b(){Zb||(Zb=new Ib(""),Yb[""]=Zb,Zb.c=Ob)}function ac(){$b();return Zb}function J(a){$b();var b;if(!(b=Yb[a])){b=new Ib(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=J(a.substr(0,c));c.e||(c.e={});c.e[d]=b;b.d=c;Yb[a]=b}return b};function bc(a){return function(){throw a;}};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function K(a,b){this.a=[];this.f=b||null}r=K.prototype;r.Ca=!1;r.Ea=!1;r.yb=!1;r.tc=!1;r.gc=!1;r.uc=0;r.Xb=function(a,b){this.yb=!1;cc(this,a,b)};function cc(a,b,c){a.Ca=!0;a.c=c;a.Ea=!b;dc(a)}function ec(a){if(a.Ca){if(!a.gc)throw new fc;a.gc=!1}}r.s=function(a){ec(this);cc(this,!0,a)};r.r=function(a){ec(this);cc(this,!1,a)};r.Y=function(a,b){return this.K(a,null,b)};r.Vb=function(a,b){return this.K(null,a,b)};r.sc=function(a,b){return this.K(a,a,b)};
r.K=function(a,b,c){this.a.push([a,b,c]);this.Ca&&dc(this);return this};function gc(a){return La(a.a,function(a){return ga(a[1])})}
function dc(a){a.d&&(a.Ca&&gc(a))&&(t.clearTimeout(a.d),delete a.d);a.e&&(a.e.uc--,delete a.e);for(var b=a.c,c=!1,d=!1;a.a.length&&!a.yb;){var e=a.a.shift(),f=e[0],g=e[1],e=e[2];if(f=a.Ea?g:f)try{var h=f.call(e||a.f,b);u(h)&&(a.Ea=a.Ea&&(h==b||h instanceof Error),a.c=b=h);b instanceof K&&(d=!0,a.yb=!0)}catch(k){b=k,a.Ea=!0,gc(a)||(c=!0)}}a.c=b;d&&(b.K(B(a.Xb,a,!0),B(a.Xb,a,!1)),b.tc=!0);c&&(a.d=t.setTimeout(bc(b),0))}function hc(a){var b=new K;b.s(a);return b}
function ic(a){Error.captureStackTrace?Error.captureStackTrace(this,ic):this.stack=Error().stack||"";a&&(this.message=String(a))}E(ic,Error);function fc(){ic.call(this)}E(fc,ic);fc.prototype.message="Deferred has already fired";fc.prototype.name="AlreadyCalledError";function jc(){return new K}var kc={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},lc=t.IDBRequest&&"LOADING"in t.IDBRequest?t.IDBTransaction:t.webkitIDBRequest&&"LOADING"in t.webkitIDBRequest&&1===t.webkitIDBTransaction.READ_WRITE?t.webkitIDBTransaction:kc,L=lc.READ_ONLY,M=lc.READ_WRITE,mc=lc.VERSION_CHANGE;function nc(a,b){return a?b?"prevunique":"prev":b?"nextunique":"next"};function oc(a,b){var c,d;2==arguments.length&&x(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=w(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],u(a));c++);return a}var pc={};
function qc(a){var b=[a];a=new rc;for(var c=0,d,e;void 0!==(e=b.pop());){0===c%4&&12<c+4&&(a.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){b.push(pc);for(d=e.length;d--;)b.push(e[d]);continue}else a.write(c);else if("number"===d)c+=1,a.write(c),sc(a,e);else if(e instanceof Date)c+=2,a.write(c),sc(a,e.valueOf());else if("string"===d){c+=3;a.write(c);c=a;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,
f>>2|255,(f|3)<<6)}c.write(0)}else if(e===pc)a.write(0);else return"";c=0}for(b=a.a.length;"00"===a.a[--b];);a.a.length=++b;return a.toString()}function tc(a){for(var b=[],c=b,d=[],e,f,g=new uc(a);null!=vc(g);)if(0===g.a)c=d.pop();else{if(null===g.a)break;do{e=g.a/4|0;a=g.a%4;for(var h=0;h<e;h++)f=[],c.push(f),d.push(c),c=f;if(0===a&&12<g.a+4)vc(g);else break}while(1);1===a?c.push(wc(g)):2===a?c.push(new Date(wc(g))):3===a?c.push(xc(g)):0===a&&(c=d.pop())}return b[0]}
function sc(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function wc(a){var b=vc(a)|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=vc(a)|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(vc(a)|0):vc(a)|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function xc(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=vc(a);if(0===f||null==f)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function uc(a){this.a=null;this.c=a;this.d=this.c.length-1;this.index=-1}function vc(a){return a.a=a.index<a.d?parseInt(a.c[++a.index]+a.c[++a.index],16):null}function rc(){this.a=[];this.c=void 0}
rc.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.c=arguments[b].toString(16),this.a.push(2===this.c.length?this.c:this.c="0"+this.c)};rc.prototype.toString=function(){return this.a.length?this.a.join(""):""};function yc(a,b){var c=qc(a),d=qc(b);return c>d?1:c==d?0:-1};function zc(){0!=Ac&&(Bc[ha(this)]=this)}var Ac=0,Bc={};zc.prototype.ac=!1;zc.prototype.Ha=function(){if(!this.ac&&(this.ac=!0,this.qa(),0!=Ac)){var a=ha(this);delete Bc[a]}};zc.prototype.qa=function(){if(this.bc)for(;this.bc.length;)this.bc.shift()()};var Cc=!F||F&&9<=Ab,Dc=F&&!xb("9");!ob||xb("528");nb&&xb("1.9b")||F&&xb("8")||mb&&xb("9.5")||ob&&xb("528");nb&&!xb("8")||F&&xb("9");function Ec(a,b){this.type=a;this.a=this.target=b}Ec.prototype.Ha=aa();Ec.prototype.c=!1;Ec.prototype.e=!0;Ec.prototype.preventDefault=function(){this.e=!1};function Fc(a){Fc[" "](a);return a}Fc[" "]=aa();function Gc(a,b){a&&Hc(this,a,b)}E(Gc,Ec);r=Gc.prototype;r.target=null;r.clientX=0;r.clientY=0;r.Yb=null;function Hc(a,b,c){var d=a.type=b.type;Ec.call(a,d);a.target=b.target||b.srcElement;a.a=c;if((c=b.relatedTarget)&&nb)try{Fc(c.nodeName)}catch(e){}a.clientX=void 0!==b.clientX?b.clientX:b.pageX;a.clientY=void 0!==b.clientY?b.clientY:b.pageY;a.Yb=b;b.defaultPrevented&&a.preventDefault();delete a.c}
r.preventDefault=function(){Gc.A.preventDefault.call(this);var a=this.Yb;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Dc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Ic="closure_listenable_"+(1E6*Math.random()|0),Jc=0;function Kc(a,b,c,d,e,f){this.S=a;this.a=b;this.src=c;this.type=d;this.capture=!!e;this.ra=f;this.key=++Jc;this.O=this.na=!1};var Lc={},Mc={},Nc={},Oc={};
function Pc(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)Pc(a,b[f],c,d,e);else if(c=Qc(c),a&&a[Ic]){f=c;c=a.f[b]||(a.f[b]=[]);var g=Rc(c,f,d,e);-1<g?(a=c[g],a.na=!1):(a=new Kc(f,null,a,b,!!d,e),a.na=!1,c.push(a))}else a:{if(!b)throw Error("Invalid event type");d=!!d;var h=Mc;b in h||(h[b]={p:0,W:0});h=h[b];d in h||(h[d]={p:0,W:0},h.p++);h=h[d];f=ha(a);h.W++;if(h[f])for(var g=h[f],k=0;k<g.length;k++){if(h=g[k],h.S==c&&h.ra==e){if(h.O)break;g[k].na=!1;break a}}else g=h[f]=[],h.p++;k=Sc();h=new Kc(c,
k,a,b,d,e);h.na=!1;k.src=a;k.S=h;g.push(h);Nc[f]||(Nc[f]=[]);Nc[f].push(h);a.addEventListener?a.addEventListener(b,k,d):a.attachEvent(b in Oc?Oc[b]:Oc[b]="on"+b,k);Lc[h.key]=h}}function Sc(){var a=Tc,b=Cc?function(c){return a.call(b.src,b.S,c)}:function(c){c=a.call(b.src,b.S,c);if(!c)return c};return b}
function Uc(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)Uc(a,b[f],c,d,e);else if(c=Qc(c),a&&a[Ic])b in a.f&&(a=a.f[b],c=Rc(a,c,d,e),-1<c&&(e=a[c],delete Lc[e.key],e.O=!0,Fa.splice.call(a,c,1)));else{d=!!d;a:{f=Mc;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ha(a),f[a]))){a=f[a];break a}a=null}if(a)for(f=0;f<a.length;f++)if(a[f].S==c&&a[f].capture==d&&a[f].ra==e){Vc(a[f]);break}}}
function Vc(a){if(!z(a)&&a&&!a.O){var b=a.src;if(b&&b[Ic])Wc(b,a);else{var c=a.type,d=a.a,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in Oc?Oc[c]:Oc[c]="on"+c,d);b=ha(b);Nc[b]&&(d=Nc[b],Pa(d,a),0==d.length&&delete Nc[b]);a.O=!0;a.S=null;a.a=null;a.src=null;a.ra=null;if(d=Mc[c][e][b])d.ec=!0,Xc(c,e,b,d);delete Lc[a.key]}}}
function Xc(a,b,c,d){if(!d.hb&&d.ec){for(var e=0,f=0;e<d.length;e++)d[e].O||(e!=f&&(d[f]=d[e]),f++);d.length=f;d.ec=!1;0==f&&(delete Mc[a][b][c],Mc[a][b].p--,0==Mc[a][b].p&&(delete Mc[a][b],Mc[a].p--),0==Mc[a].p&&delete Mc[a])}}function Yc(a,b,c,d,e){var f=1;b=ha(b);if(a[b]){var g=--a.W,h=a[b];h.hb?h.hb++:h.hb=1;try{for(var k=h.length,m=0;m<k;m++){var n=h[m];n&&!n.O&&(f&=!1!==Zc(n,e))}}finally{a.W=Math.max(g,a.W),h.hb--,Xc(c,d,b,h)}}return Boolean(f)}
function Zc(a,b){var c=a.S,d=a.ra||a.src;a.na&&Vc(a);return c.call(d,b)}
function Tc(a,b){if(a.O)return!0;var c=a.type,d=Mc;if(!(c in d))return!0;var d=d[c],e,f;if(!Cc){e=b||da("window.event");var g=!0 in d,h=!1 in d;if(g){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var k=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(m){k=!0}if(k||void 0==e.returnValue)e.returnValue=!0}}k=new Gc;Hc(k,e,this);e=!0;try{if(g){for(var n=[],p=k.a;p;p=p.parentNode)n.push(p);f=d[!0];f.W=f.p;for(var s=n.length-1;!k.c&&0<=s&&f.W;s--)k.a=n[s],e&=Yc(f,n[s],c,!0,k);if(h)for(f=d[!1],f.W=
f.p,s=0;!k.c&&s<n.length&&f.W;s++)k.a=n[s],e&=Yc(f,n[s],c,!1,k)}else e=Zc(a,k)}finally{n&&(n.length=0)}return e}c=new Gc(b,this);return e=Zc(a,c)}var $c="__closure_events_fn_"+(1E9*Math.random()>>>0);function Qc(a){return ga(a)?a:a[$c]||(a[$c]=function(b){return a.handleEvent(b)})};function ad(){zc.call(this);this.f={};this.zc=this}E(ad,zc);ad.prototype[Ic]=!0;ad.prototype.m=null;ad.prototype.Bb=function(a,b,c,d){Pc(this,a,b,c,d)};ad.prototype.removeEventListener=function(a,b,c,d){Uc(this,a,b,c,d)};
function bd(a,b){var c,d=a.m;if(d)for(c=[];d;d=d.m)c.push(d);var d=a.zc,e=b,f=e.type||e;if(x(e))e=new Ec(e,d);else if(e instanceof Ec)e.target=e.target||d;else{var g=e,e=new Ec(f,d);Xa(e,g)}var g=!0,h;if(c)for(var k=c.length-1;!e.c&&0<=k;k--)h=e.a=c[k],g=cd(h,f,!0,e)&&g;e.c||(h=e.a=d,g=cd(h,f,!0,e)&&g,e.c||(g=cd(h,f,!1,e)&&g));if(c)for(k=0;!e.c&&k<c.length;k++)h=e.a=c[k],g=cd(h,f,!1,e)&&g}
ad.prototype.qa=function(){ad.A.qa.call(this);var a=0,b;for(b in this.f){for(var c=this.f[b],d=0;d<c.length;d++)++a,delete Lc[c[d].key],c[d].O=!0;c.length=0}this.m=null};function Wc(a,b){var c=b.type;c in a.f&&Pa(a.f[c],b)&&(delete Lc[b.key],b.O=!0)}function cd(a,b,c,d){if(!(b in a.f))return!0;var e=!0;b=Qa(a.f[b]);for(var f=0;f<b.length;++f){var g=b[f];if(g&&!g.O&&g.capture==c){var h=g.S,k=g.ra||g.src;g.na&&Wc(a,g);e=!1!==h.call(k,d)&&e}}return e&&!1!=d.e}
function Rc(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(f.S==b&&f.capture==!!c&&f.ra==d)return e}return-1};function dd(a,b,c){if(ga(a))c&&(a=B(a,c));else if(a&&"function"==typeof a.handleEvent)a=B(a.handleEvent,a);else throw Error("Invalid listener argument");2147483647<b||t.setTimeout(a,b||0)};function ed(a,b,c){var d;if(A(a))d=a.store,b=a.id,null!=a.parent&&(c=new ed(a.parent));else if(u(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new ed(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!u(b))throw Error("Invalid key value: "+a);this.a=d;this.id=b;this.parent=c||null}r=ed.prototype;r.toJSON=function(){var a={store:this.a,id:this.id};this.parent&&(a.parent=this.parent.toJSON());return a};
r.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.a+"^:"+this.id};r.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};r.Pc=l("a");r.vc=l("id");r.Oc=l("parent");function fd(a){if(w(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function O(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d;ga(Object.freeze)&&Object.freeze(this)}O.prototype.lower=void 0;O.prototype.upper=void 0;O.prototype.toJSON=function(){return gd(this)};O.only=function(a){return new O(a,a,!1,!1)};O.bound=function(a,b,c,d){return new O(a,b,c,d)};O.upperBound=function(a,b){return new O(void 0,a,void 0,!!b)};O.lowerBound=function(a,b){return new O(a,void 0,!!b,void 0)};
function hd(a){var b;if(v(a))b=Qa(a),b.push("\uffff");else if(x(a))b=a+"\uffff";else throw new P;return O.bound(a,b,!1,!0)}function gd(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}function id(a){return null!=a?null!=a.upper&&null!=a.lower?jd.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?jd.upperBound(a.upper,a.upperOpen):null!=a.lower?jd.lowerBound(a.lower,a.lowerOpen):null:null}
function kd(a){if(a instanceof O)return"";if(null!=a){if(A(a)){for(var b in a)if(a.hasOwnProperty(b)&&!(0<=Ga(["lower","upper","lowerOpen","upperOpen"],b)))return'invalid attribute "'+b+'" in key range object';return""}return"key range must be an object"}return""}
O.prototype.xb=function(a){var b=this.lower,c=this.upper,d=this.lowerOpen,e=this.upperOpen;null!=a.lower&&(null==this.lower||a.lower>=this.lower)&&(b=a.lower,d=a.lowerOpen||this.lowerOpen);null!=a.upper&&(null==this.upper||a.upper<=this.upper)&&(c=a.upper,e=a.upperOpen||this.upperOpen);return O.bound(b,c,d,e)};function ld(a){if(!a)return"";var b=a.lowerOpen?" (":" [";null!=a.lower&&(b+=a.lower+", ");null!=a.upper&&(b+=a.upper);return b+=a.upperOpen?")":"]"}
function md(a,b,c,d,e){if(c)if(c.lowerOpen||c.upperOpen||null==c.lower||null==c.upper||0!==Q(c.lower,c.upper)){if(null!=c.lower){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(nd(c.lower,b))}null!=c.upper&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(nd(c.upper,b)))}else d.push(a+" = ?"),e.push(nd(c.lower,b))}
function od(a,b,c,d){var e,f,g,h;if("^"==a)return hd(b);if("<"==a||"<="==a)e=b,g="<"==a;else if(">"==a||">="==a)f=b,h=">"==a;else if("="==a||"=="==a)e=f=b;else throw new P("invalid op: "+a);if("<"==c||"<="==c)e=d,g="<"==c;else if(">"==c||">="==c)f=d,h=">"==c;else if(u(c))throw new P("invalid op2: "+c);return O.bound(f,e,h,g)}var jd=t.IDBKeyRange||t.webkitIDBKeyRange||O;function P(a){pa.call(this,a);this.name="ydn.error.ArgumentException"}E(P,pa);function pd(a){pa.call(this,a);this.name="ydn.error.NotSupportedException"}E(pd,pa);function qd(a){pa.call(this,a);this.name="ydn.error.NotImplementedException"}E(qd,pa);function rd(a){pa.call(this,a);this.name="ydn.error.InvalidOperationException"}E(rd,pa);
function sd(a){Error.captureStackTrace?Error.captureStackTrace(this,sd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}E(sd,Error);sd.prototype.name="ydn.error.InternalError";function td(a,b,c,d,e){u(e)||(e=v(a)?a.join(", "):a);if(null!=a&&!x(a)&&!w(a))throw new P("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);v(a)&&Object.freeze&&Object.freeze(a);!u(a)&&u(e)&&(a=e);this.keyPath=a;this.e=w(this.keyPath);this.name=e;this.type=ud(b);if(u(b)){if(!u(this.type))throw new P("type invalid in index: "+this.name);if(v(this.keyPath))throw new P('composite key for store "'+this.name+'" must not specified type');}this.unique=!!c;this.multiEntry=!!d;this.f=
x(this.type)?this.type:vd;this.c=x(e)?e:v(a)?this.keyPath.join(","):a;this.a=Ca(this.c);this.d=this.e||this.multiEntry?null:this.keyPath.split(".")}function wd(a,b){if(null!=b){if(w(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=oc(b,a.keyPath[d]);c[d]=f}return c}return oc(b,a.keyPath)}}function xd(a,b,c){for(var d=0;d<a.d.length;d++)d==a.d.length-1?b[a.d[d]]=c:A(b[a.d[d]])||(b[a.d[d]]={})}var vd="TEXT";
function nd(a,b){if("DATE"==b){if(a instanceof Date)return+a}else return u(b)?a:qc(a)}function yd(a,b){return"DATE"==b?new Date(a):u(b)?a:tc(a)}var zd=["BLOB","DATE","INTEGER","NUMERIC",vd];function ud(a){if(x(a))return a=Ga(zd,a),zd[a]}td.prototype.getName=l("name");td.prototype.toJSON=function(){return{name:this.name,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};
td.prototype.Ba=function(){var a=v(this.keyPath)?Qa(this.keyPath):this.keyPath;return new td(a,this.type,this.unique,this.multiEntry,this.name)};function Ad(a,b){return null!=a||null!=b?null!=a?null!=b?w(a)&&w(b)?Sa(a,b)?null:"expect: "+a+", but: "+b:Bd(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}
td.prototype.hint=function(a){if(!a)return this;var b=v(this.keyPath)?Qa(this.keyPath):this.keyPath,c=this.type;u(a.type)||"TEXT"!=c||(c=void 0);return new td(b,c,this.unique,this.multiEntry,a.name)};function Cd(a,b,c,d,e,f,g){this.name=a;if(!x(this.name))throw new P("store name must be a string");this.keyPath=u(b)?b:null;this.e=w(this.keyPath);if(null!==this.keyPath&&!x(this.keyPath)&&!this.e)throw new P("keyPath must be a string or array");this.autoIncrement=c;var h;if(null!=d){h=ud(d);if(!u(h))throw new P('type "'+d+'" for primary key in store "'+this.name+'" is invalid.');if(this.e)throw new P('composite key for store "'+this.name+'" must not specified type');}this.type=null!=h?h:this.autoIncrement?
"INTEGER":void 0;this.d=x(this.keyPath)?this.keyPath.split("."):[];this.indexes=e||[];this.ea=!!f;this.nc=!!g;this.f=x(this.type)?this.type:vd;this.c=v(this.keyPath)?this.keyPath.join(","):x(this.keyPath)?this.keyPath:"_ROWID_";this.a=Ca(this.c)}r=Cd.prototype;r.ea=!1;r.nc=!1;r.toJSON=function(){for(var a=[],b=0;b<this.indexes.length;b++)a.push(this.indexes[b].toJSON());return{name:this.name,keyPath:this.keyPath,autoIncrement:this.autoIncrement,type:this.type,indexes:a}};
function Dd(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync".split(" "),c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ga(b,c))throw new P('Unknown attribute "'+c+'"');b=[];c=a.indexes||[];if(v(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f=["name","unique","type","keyPath","multiEntry"],g=void 0;for(g in e)if(e.hasOwnProperty(g)&&-1==Ga(f,g))throw new P("Unknown field: "+g+" in "+R(e));e=new td(e.keyPath,e.type,e.unique,e.multiEntry,e.name);u(e.keyPath)&&e.keyPath===a.keyPath||
b.push(e)}return new Cd(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed)}function Ed(a,b,c,d,e,f,g){a=Fd(a,b,c,d,e,f,g);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.pa;a.n&&(b+=" WHERE "+a.n);a.group&&(b+=" GROUP BY "+a.group);a.V&&(b+=" ORDER BY "+a.V);return b}
function Fd(a,b,c,d,e,f,g){var h={select:"",pa:"",n:"",group:"",V:""},k=a.c,m=a.a,n=null;d!==k&&x(d)&&(n=Gd(a,d));var p=!!n,s=d||k,q=Ca(s),y=p?n.type:a.type,D=p&&n.multiEntry;h.pa=Hd(a);3===c?h.select="COUNT("+m+")":1===c?(h.select=m,null!=d&&d!=k&&(h.select+=", "+q)):h.select="*";d=g?"DISTINCT ":"";k=[];D?(D=Ca("ydn.db.me:"+a.getName()+":"+n.getName()),h.select=3===c?"COUNT("+d+D+"."+q+")":1===c?Hd(a)+"."+m+", "+D+"."+q:Hd(a)+".*, "+D+"."+q+" AS "+s,h.pa=D+" INNER JOIN "+Hd(a)+" USING ("+m+")",null!=
e&&(md(D+"."+q,y,e,k,b),0<k.length&&(h.n=h.n?h.n+(" AND "+k.join(" AND ")):k.join(" AND ")))):null!=e&&(md(q,y,e,k,b),0<k.length&&(h.n=h.n?h.n+(" AND "+k.join(" AND ")):k.join(" AND ")));p&&(!n.unique&&g)&&(h.group=q);a=f?"DESC":"ASC";h.V=q+" "+a;p&&(h.V+=", "+m+" "+a);return h}r.Ba=function(){return Dd(this.toJSON())};r.index=function(a){return this.indexes[a]||null};function Gd(a,b){return Ma(a.indexes,function(a){return a.name==b})}
function Id(a,b){for(var c=0;c<a.indexes.length;c++)if(!Ad(a.indexes[c].keyPath,b))return a.indexes[c];return null}function Jd(a,b){return b==a.keyPath?!0:La(a.indexes,function(a){return a.name==b})}function Hd(a){return Ca(a.name)}
r.hint=function(a){if(!a)return this;var b=this.autoIncrement,c=v(this.keyPath)?Qa(this.keyPath):this.keyPath,d=this.type,e=Ia(this.indexes,function(a){return a.Ba()});u(a.type)||"TEXT"!=d||(d=void 0);v(a.keyPath)&&(x(c)&&c==a.keyPath.join(","))&&(c=Qa(a.keyPath));for(var f=0,g=a.indexes.length;f<g;f++)if(a.indexes[f].e)for(var h=a.indexes[f].getName(),k=e.length-1;0<=k;k--)if(0<=h.indexOf(e[k].getName())){e[k]=a.indexes[f].Ba();break}for(f=0;f<e.length;f++)(g=Gd(a,e[f].getName()))&&(e[f]=e[f].hint(g));
return new Cd(a.name,c,b,d,e)};r.getName=l("name");function Kd(a){return!!a.keyPath}function Ld(a,b,c){if(!a.keyPath&&null!=c)return c;if(a.e){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(oc(b,a.keyPath[d]));return c}if(a.keyPath)return Va(b,a.d)}function Md(a,b,c){for(var d=0;d<a.d.length;d++){var e=a.d[d];if(d==a.d.length-1){b[e]=c;break}u(b[e])||(b[e]={});b=b[e]}}
function Nd(a,b,c){var d=[],e=[];c=u(c)?c:Ld(a,b);u(c)&&(e.push(a.a),d.push(nd(c,a.type)));for(var f=0;f<a.indexes.length;f++){var g=a.indexes[f];if(!g.multiEntry&&g.name!==a.keyPath&&"_default_"!=g.name){var h=wd(g,b);null!=h&&(d.push(nd(h,g.type)),e.push(g.a))}}a.nc||(d.push(R(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{Wb:e,hc:a,C:d,key:c}}
function Od(a,b){if(!b)return"missing store: "+a.name;if(a.name!=b.name)return"store name, expect: "+a.name+", but: "+b.name;var c=Ad(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(u(a.autoIncrement)&&u(b.autoIncrement)&&a.autoIncrement!=b.autoIncrement)return"autoIncrement, expect:  "+a.autoIncrement+", but: "+b.autoIncrement;if(a.indexes.length!=b.indexes.length)return"indexes length, expect:  "+a.indexes.length+", but: "+b.indexes.length;if(u(a.type)&&u(b.type)&&(w(a.type)?!Sa(a.type,b.type):
a.type!=b.type))return"data type, expect:  "+a.type+", but: "+b.type;for(c=0;c<a.indexes.length;c++){var d=Gd(b,a.indexes[c].name),e;e=a.indexes[c];if(d)if(e.name!=d.name)e="name, expect: "+e.name+", but: "+d.name;else{var f=Ad(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.unique&&null!=d.unique&&e.unique!=d.unique?"unique, expect: "+e.unique+", but: "+d.unique:null!=e.multiEntry&&null!=d.multiEntry&&e.multiEntry!=d.multiEntry?"multiEntry, expect: "+e.multiEntry+", but: "+d.multiEntry:u(e.type)&&
u(d.type)&&(w(e.type)?!Sa(e.type,d.type):e.type!=d.type)?"data type, expect: "+e.type+", but: "+d.type:""}else e="no index for "+e.name;if(0<e.length)return'index "'+a.indexes[c].name+'" '+e}return""};function Pd(a,b){var c,d=b;if(A(a)){c=["version","stores"];for(var e in a)if(a.hasOwnProperty(e)&&-1==Ga(c,e))throw new P("Unknown field: "+e+" in schema.");c=a.version;d=[];e=a.stores||[];if(!v(e))throw new P("stores must be array");for(var f=0;f<e.length;f++){var g=Dd(e[f]);if(-1!=Na(d,function(a){return a.name==g.name}))throw new P('duplicate store name "'+g.name+'".');d.push(g)}}else x(a)?c=0==a.length?void 0:parseFloat(a):z(a)&&(c=a);if(u(c)){if(!z(c)||0>c)throw new P("Invalid version: "+c+" ("+
a+")");isNaN(c)&&(c=void 0)}if(u(b)&&(!v(b)||0<b.length&&!(b[0]instanceof Cd)))throw new P("stores");this.version=c;this.sa=!u(this.version);this.stores=d||[]}r=Pd.prototype;r.toJSON=function(){var a=Ia(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;u(this.version)&&(b.version=this.version);return b};r.sa=!1;r.J=ca(!1);function Qd(a){return Ia(a.stores,function(a){return a.name})}r.ia=function(a){return this.stores[a]||null};r.count=function(){return this.stores.length};
function S(a,b){return Ma(a.stores,function(a){return a.name==b})}function Rd(a,b){return La(a.stores,function(a){return a.name==b})}function Sd(a,b,c){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var d=0;d<a.stores.length;d++){var e=S(b,a.stores[d].name),e=e&&c?e.hint(a.stores[d]):e,e=Od(a.stores[d],e);if(0<e.length)return'store: "'+a.stores[d].name+'" '+e}return""};function Td(a){Error.captureStackTrace?Error.captureStackTrace(this,Td):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}E(Td,Error);function Ud(a){Error.captureStackTrace?Error.captureStackTrace(this,Ud):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotSupportedException"}E(Td,Error);Ud.prototype.name="ydn.error.NotSupportedException";
function Vd(a){Error.captureStackTrace?Error.captureStackTrace(this,Vd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotImplementedException"}E(Vd,Error);function Wd(a){Error.captureStackTrace?Error.captureStackTrace(this,Wd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}E(Wd,Error);Wd.prototype.name="ydn.InternalError";
function Xd(a){Error.captureStackTrace?Error.captureStackTrace(this,Xd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}E(Xd,Error);Xd.prototype.name="ydn.error.ConstraintError";function Yd(a){Error.captureStackTrace?Error.captureStackTrace(this,Yd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationException"}E(Td,Error);
function Zd(a){Error.captureStackTrace?Error.captureStackTrace(this,Zd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}E(Zd,Error);function $d(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function ae(){}
function be(a,b,c){switch(typeof b){case "string":ce(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if(v(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),be(a,b[f],c),e=",";c.push("]");break}c.push("{");d="";for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(f=b[e],"function"!=typeof f&&(c.push(d),ce(e,c),c.push(":"),be(a,f,c),d=","));c.push("}");
break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var de={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},ee=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function ce(a,b){b.push('"',a.replace(ee,function(a){if(a in de)return de[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return de[a]=e+b.toString(16)}),'"')};J("ydn");var fe="undefined"!=typeof t.JSON;function ge(a){return!x(a)||/^[\s\xa0]*$/.test(a)?{}:fe?JSON.parse(a):$d(a)}function T(a){var b;try{b=R(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function R(a){if(fe)a=JSON.stringify(a);else{var b=[];be(new ae,a,b);a=b.join("")}return a};function he(a,b){u(a)&&5242880<a&&G(this.b,"storage size request ignored, use Quota Management API instead");this.o=null;this.Oa=b||NaN}
he.prototype.wa=function(a,b){function c(a,c,d){H(e.b,(d?"changing":"upgrading")+" version to "+a.version+" from "+g);for(d=0;d<b.stores.length;d++)ie(e,a,c,b.stores[d]);c=a.objectStoreNames;var f=c.length;for(d=0;d<f;d++)Rd(b,c[d])||(a.deleteObjectStore(c[d]),H(e.b,"store: "+c[d]+" deleted."))}function d(a,b){f.Ca?G(e.b,"database already set."):u(b)?(G(e.b,b?b.message:"Error received."),e.o=null,f.r(b)):(e.o=a,e.o.onabort=function(a){G(e.b,e+": onabort - "+a.message)},e.o.onerror=function(a){G(e.b,
e+": onerror - "+a.message)},e.o.onversionchange=function(a){I(e.b,e+" closing connection for onversionchange to: "+a.version);e.o&&(e.o.onabort=null,e.o.onblocked=null,e.o.onerror=null,e.o.onversionchange=null,e.o.close(),e.o=null,ga(e.e)&&e.e())},f.s(parseFloat(g)))}var e=this,f=new K,g=void 0,h=b.version;H(e.b,"Opening database: "+a+" ver: "+(b.sa?"auto":h));var k;k=u(h)?je.open(a,h):je.open(a);k.onsuccess=function(f){var h=f.target.result;u(g)||(g=h.version);H(e.b,"Database: "+h.name+", ver: "+
h.version+" opened.");if(b.sa)e.N(function(f){if(b.J())for(var g=0;g<f.stores.length;g++)Rd(b,f.stores[g].getName())||ke(b,f.stores[g].Ba());f=Sd(b,f);if(0<f.length){H(e.b,"Schema change require for difference in "+f);var k=z(h.version)?h.version+1:1;if("IDBOpenDBRequest"in t){h.close();var m=je.open(a,k);m.onupgradeneeded=function(a){a=a.target.result;H(e.b,"re-open for version "+a.version);c(a,m.transaction,!1)};m.onsuccess=function(a){d(a.target.result)};m.onerror=function(){H(e.b,e+": fail.");
d(null)}}else{var p=h.setVersion(k+"");p.a=function(a){G(e.b,"migrating from "+h.version+" to "+k+" failed.");d(null,a)};p.onsuccess=function(){p.transaction.oncomplete=N;c(h,p.transaction,!0)};var N=function(){var b=je.open(a);b.onsuccess=function(a){a=a.target.result;H(e.b,e+": OK.");d(a)};b.onerror=function(){H(e.b,e+": fail.");d(null)}};null!=p.transaction&&(p.transaction.oncomplete=N)}}else d(h)},void 0,h);else if(b.version>h.version){var k=h.setVersion(b.version);k.a=function(a){G(e.b,"migrating from "+
h.version+" to "+b.version+" failed.");d(null,a)};k.onsuccess=function(){c(h,k.transaction,!0)}}else b.version==h.version?H(e.b,"database version "+h.version+" ready to go"):G(e.b,"connected database version "+h.version+" is higher than requested version."),e.N(function(a){a=Sd(b,a);0<a.length?(H(e.b,a),d(null,new Xd("different schema: "+a))):d(h)},void 0,h)};k.onupgradeneeded=function(a){a=a.target.result;g=NaN;H(e.b,"upgrade needed for version "+a.version);c(a,k.transaction,!1)};k.onerror=function(c){Wb(e.b,
'open request to database "'+a+'" '+(u(b.version)?" with version "+b.version:"")+" cause error of "+k.error.name);d(null,c)};k.onblocked=function(c){Wb(e.b,"database "+a+" "+b.version+" block, close other connections.");d(null,c)};z(this.Oa)&&!isNaN(this.Oa)&&dd(function(){"done"!=k.readyState&&(Wb(e.b,e+": database state is still "+k.readyState),d(null,new le("connection timeout after "+e.Oa)))},this.Oa);return f};var je=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.moz_indexedDB||t.msIndexedDB;
r=he.prototype;r.Oa=18E4;r.ka=ca("indexeddb");r.Qb=function(){return this.o||null};r.Ta=function(){return!!this.o};r.b=J("ydn.db.con.IndexedDb");r.o=null;r.ob=function(){return this.o?parseFloat(this.o.version):void 0};
r.N=function(a,b,c){c=c||this.o;if(u(b)){if(null===b){if(0==c.objectStoreNames.length){a(new Pd(c.version));return}throw new Wd;}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new Pd(c.version));return}b=c.transaction(b,L)}for(var e=c.objectStoreNames,f=[],g=e.length,d=0;d<g;d++){for(var h=b.objectStore(e[d]),k=[],m=0,n=h.indexNames.length;m<n;m++){var p=h.index(h.indexNames[m]);k[m]=new td(p.keyPath,void 0,p.unique,p.multiEntry,p.name)}f[d]=
new Cd(h.name,h.keyPath,h.autoIncrement,void 0,k)}b=new Pd(c.version,f);a(b)};
function ie(a,b,c,d){function e(){var a={autoIncrement:!!d.autoIncrement};null!=d.keyPath&&(a.keyPath=d.keyPath);try{return b.createObjectStore(d.getName(),a)}catch(c){if("InvalidAccessError"==c.name)throw new me("creating store for "+d.getName()+" of keyPath: "+d.keyPath+" and autoIncrement: "+d.autoIncrement);if("ConstraintError"==c.name)throw new Xd("creating store for "+d.getName());throw c;}}I(a.b,"Creating Object Store for "+d.getName()+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.getName()))if(c=
c.objectStore(d.getName()),(d.keyPath||"")!=(c.keyPath||""))b.deleteObjectStore(d.getName()),G(a.b,"store: "+d.getName()+" deleted due to keyPath change."),c=e();else if(fa(c.autoIncrement)&&fa(d.autoIncrement)&&c.autoIncrement!=d.autoIncrement)b.deleteObjectStore(d.getName()),G(a.b,"store: "+d.getName()+" deleted due to autoIncrement change."),c=e();else{for(var f=c.indexNames,g=0,h=0,k=0;k<d.indexes.length;k++){var m=d.indexes[k];if(!f.contains(m.name)){if(m.unique||m.multiEntry){var n={unique:m.unique,
multiEntry:m.multiEntry};c.createIndex(m.name,m.keyPath,n)}else c.createIndex(m.name,m.keyPath);g++}}for(k=0;k<f.length;k++)Jd(d,f[k])||(c.deleteIndex(f[k]),h++);I(a.b,"Updated store: "+c.name+", "+g+" index created, "+h+" index deleted.")}else{c=e();for(k=0;k<d.indexes.length;k++)m=d.indexes[k],I(a.b,"Creating index: "+m.name+" multiEntry: "+m.multiEntry),m.unique||m.multiEntry?(n={unique:m.unique,multiEntry:m.multiEntry},c.createIndex(m.name,m.keyPath,n)):c.createIndex(m.name,m.keyPath);I(a.b,"Created store: "+
c.name+" keyPath: "+c.keyPath)}}r.$a=function(a,b,c,d){var e=this.o;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(null):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onerror=function(a){d("error",a)},b.onabort=function(a){d("abort",a)},a(b),a=null)};r.nb=function(){I(this.b,this+" closing connection");this.o.close()};r.toString=function(){return"IndexedDB:"+(this.o?this.o.name+":"+this.o.version:"")};function ne(a){Error.captureStackTrace?Error.captureStackTrace(this,ne):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}E(ne,Error);ne.prototype.name="ConstraintError";function oe(a){Error.captureStackTrace?Error.captureStackTrace(this,oe):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}E(oe,Error);
function pe(a){Error.captureStackTrace?Error.captureStackTrace(this,pe):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}E(pe,Error);pe.prototype.name="ydn.db.VersionError";function qe(a){Error.captureStackTrace?Error.captureStackTrace(this,qe):this.stack=Error().stack||"";a&&(this.message=String(a))}E(qe,Error);qe.prototype.name="ydn.db.InternalError";
function re(a){Error.captureStackTrace?Error.captureStackTrace(this,re):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}E(re,Error);function me(a){Error.captureStackTrace?Error.captureStackTrace(this,me):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}E(me,Error);function se(a){Error.captureStackTrace?Error.captureStackTrace(this,se):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}
E(se,Error);se.prototype.name="NotFoundError";function te(a,b){Error.captureStackTrace?Error.captureStackTrace(this,te):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}E(te,Error);function ue(a,b){Error.captureStackTrace?Error.captureStackTrace(this,ue):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}E(ue,Error);
function ve(a){Error.captureStackTrace?Error.captureStackTrace(this,ve):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}E(ve,Error);function le(a){Error.captureStackTrace?Error.captureStackTrace(this,le):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}E(le,Error);function we(a){this.a=u(a)?a:4194304}r=we.prototype;
r.wa=function(a,b){function c(b,c){var f=b.version?parseInt(b.version,10):0,f=c.sa?isNaN(f)?1:f+1:c.version;I(e.b,a+": changing version from "+b.version+" to "+f);var g=!1,h=0;b.changeVersion(b.version,f+"",function(a){e.N(function(b){g=!0;for(var d=0;d<c.count();d++){var f=S(b,c.ia(d).getName()),f=f?f.hint(c.ia(d)):null;xe(e,a,c.ia(d),function(a){a&&h++},f)}if(c instanceof ye)for(d=0;d<b.count();d++)f=b.ia(d),Rd(c,f.getName())||ke(c,f)},a,b)},function(a){throw a;},function(){if(g){var f=".";h!=c.stores.length&&
(f=" but unexpected stores exists.");I(e.b,a+":"+b.version+" ready"+f);d(b)}else G(e.b,a+": changing version voided.")})}function d(a,b){u(b)?(e.v=null,g.r(b)):(e.v=a,g.s(parseFloat(f)))}var e=this,f=NaN,g=new K,h=null;try{h=t.openDatabase(a,"",a,this.a)}catch(k){if("SECURITY_ERR"==k.name)G(this.b,"SECURITY_ERR for opening "+a),h=null,this.Rb=new ue(k);else throw k;}if(h){var f=h.version,m="database "+a+(0==h.version.length?"":" version "+h.version);null!=b.version&&b.version==h.version?(Xb(e.b,"Existing "+
m+" opened as requested."),d(h)):this.N(function(a){(a=Sd(b,a,!0))?(0==h.version.length?Xb(e.b,"New "+m+" created."):b.sa?Xb(e.b,"Existing "+m+" opened and schema change for "+a):Xb(e.b,"Existing "+m+" opened and  schema change to version "+b.version+" for "+a),c(h,b)):(Xb(e.b,"Existing "+m+" with same schema opened."),d(h))},null,h)}else d(null,this.Rb);return g};r.ka=ca("websql");r.Rb=null;r.v=null;r.Qb=function(){return this.v||null};r.b=J("ydn.db.con.WebSql");
function ze(a){var b=a.f,c="CREATE TABLE IF NOT EXISTS "+Hd(a)+" (",d=a.a,c=c+(d+" "+b+" PRIMARY KEY ");a.autoIncrement&&(c+=" AUTOINCREMENT ");for(var c=c+" ,_default_ BLOB",e=[],f=[d],g=0,h=a.indexes.length;g<h;g++){var k=a.index(g),m="";if(k.multiEntry)m=k.unique?" UNIQUE ":"",k="CREATE TABLE IF NOT EXISTS "+Ca("ydn.db.me:"+a.getName()+":"+k.getName())+" ("+d+" "+b+", "+k.a+" "+k.f+m+")",e.push(k);else{k.unique&&(m=" UNIQUE ");var n=k.a;-1==f.indexOf(n)&&(c+=", "+n+" "+k.f+m,f.push(n))}}e.push(c+
");");return e}r.ob=function(){return this.v?parseFloat(this.v.version):void 0};
r.N=function(a,b,c){function d(a,b){throw b;}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var s="sql"in e?e.sql:void 0;I(f.b,"Parsing table schema from SQL: "+s);for(var q=s.substr(s.indexOf("("),s.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),y=void 0,D,s=[],X=!1,N=!1,ba=0;ba<q.length;ba++){var Y=q[ba].match(/\w+|"[^"]+"/g),Ja=Ia(Y,function(a){return a.toUpperCase()}),ja=za(Y[0],
'"'),Y=ud(Ja[1]);if(-1!=Ja.indexOf("PRIMARY")&&-1!=Ja.indexOf("KEY"))x(ja)&&(!/^[\s\xa0]*$/.test(ja)&&"_ROWID_"!=ja)&&(y=ja),D=Y,-1!=Ja.indexOf("AUTOINCREMENT")&&(X=!0);else if("_default_"==ja)N=!0;else{var zb="UNIQUE"==Ja[2],Ja=new td(ja,Y,zb);s.push(Ja)}}if(0==e.name.lastIndexOf("ydn.db.me:",0))if((q=e.name.split(":"))&&3<=q.length){var Sf=q[1],y=Na(h,function(a){return a.getName()===Sf}),q=new td(q[2],Y,zb,!0);0<=y?(ba=h[y],s.push(q),h[y]=new Cd(ba.getName(),ba.keyPath,X,D,s,void 0,!N)):h.push(new Cd(Sf,
void 0,!1,void 0,[q]))}else G(f.b,'Invalid multiEntry store name "'+e.name+'"');else q=Na(h,function(a){return a.getName()===e.name}),0<=q?(ba=h[q].index(0),s.push(ba),h[q]=new Cd(e.name,y,X,D,s,void 0,!N)):(s=new Cd(e.name,y,X,D,s,void 0,!N),h.push(s))}}d=new Pd(g,h);a(d)}}var f=this,g=(c=c||this.v)&&c.version?parseFloat(c.version):void 0,g=isNaN(g)?void 0:g,h=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.N(a,b,c)},function(a){Wb(f.b,"opening tx: "+a.message);
throw a;},e)};
function xe(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){g++;g==h.length&&(d(!0),d=null)},function(b,e){g++;g==h.length&&(d(!1),d=null);throw new te(e,"SQLError creating table: "+c.name+" "+e.message+' for executing "'+a);})}var g=0,h=ze(c),k="Create";if(e){e=Od(c,e);if(0==e.length){I(a.b,"same table "+c.name+" exists.");d(!0);d=null;return}k="Modify";G(a.b,"table: "+c.name+" has changed by "+e+" additionallly TABLE ALTERATION is not implemented, dropping old table.");h.unshift("DROP TABLE IF EXISTS "+Ca(c.name))}I(a.b,
k+" table: "+c.name+": "+h.join(";"));for(a=0;a<h.length;a++)f(h[a])}r.Ta=function(){return!!this.v};r.nb=aa();r.$a=function(a,b,c,d){function e(a){I(h.b,h+": Tx "+c+" request cause error.");d("error",a)}function f(){d("complete",{type:"complete"})}function g(b){a(b)}var h=this;null===this.v&&(a(null),d("error",this.Rb));c==L?this.v.readTransaction(g,e,f):c==mc?this.v.changeVersion(this.v.version,this.v.version+1+"",g,e,f):this.v.transaction(g,e,f)};
function Ae(a){function b(){c.b.log(Nb,"all tables in "+a+" deleted.",void 0)}var c=new we,d=new ye;H(c.b,"deleting websql database: "+a);d=c.wa(a,d);d.Y(function(){c.$a(function(b){b.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(d,g){if(g&&g.rows){for(var h=g.rows.length,k=0,m=0;m<h;m++){var n=g.rows.item(m);"__WebKitDatabaseInfoTable__"!=n.name&&"sqlite_sequence"!=n.name&&(k++,I(c.b,"deleting table: "+n.name),b.executeSql("DROP TABLE "+n.name))}H(c.b,k+' tables deleted from "'+
a+'"')}},function(a,b){throw b;})},[],M,b)});d.Vb(function(){G(c.b,"Connecting "+a+" failed.")})}r.toString=function(){return"WebSql:"+(this.v?":"+this.v.version:"")};function Be(a,b,c){a=["ydn.db",a];u(b)&&(a.push(b),u(c)&&(a.push(c),u(void 0)&&a.push(qc(void 0))));return a.join("^|")};function Ce(a){this.D=a||De}function De(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}r=Ce.prototype;r.u=null;r.D=null;r.U=null;r.T=null;
function Ee(a,b){if(null==a.u)a.u=new Fe(b),a.U=a.u,a.T=a.u;else{var c=null;Ge(a,function(a){var e=null;0<this.D(a.value,b)?(e=a.left,null==a.left&&(c=new Fe(b,a),a.left=c,a==this.U&&(this.U=c))):0>this.D(a.value,b)&&(e=a.right,null==a.right&&(c=new Fe(b,a),a.right=c,a==this.T&&(this.T=c)));return e});c&&(Ge(a,function(a){a.count++;return a.parent},c.parent),He(a,c.parent))}}
function Ie(a,b){Ge(a,function(a){var d=null;0<this.D(a.value,b)?d=a.left:0>this.D(a.value,b)?d=a.right:Ne(this,a);return d})}r.clear=function(){this.T=this.U=this.u=null};r.contains=function(a){var b=!1;Ge(this,function(c){var d=null;0<this.D(c.value,a)?d=c.left:0>this.D(c.value,a)?d=c.right:b=!0;return d});return b};r.Da=function(){return this.u?this.u.count:0};r.cb=function(){var a=[];Oe(this,function(b){a.push(b)});return a};
function Oe(a,b){if(a.u){var c,d=c=Pe(a);for(c=c.left?c.left:c;null!=d;)if(null!=d.left&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=null!=d.right&&d.right!=c?d.right:d.parent;c=e}}}function Ge(a,b,c){for(c=c?c:a.u;c&&null!=c;)c=b.call(a,c)}
function He(a,b){Ge(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&Qe(this,a.left),Re(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&Re(this,a.right),Qe(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function Qe(a,b){Se(b)?(b.parent.left=b.right,b.right.parent=b.parent):Te(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.u=b.right,a.u.parent=null);var c=b.right;b.right=b.right.left;null!=b.right&&(b.right.parent=b);c.left=b;b.parent=c;c.count=b.count;b.count-=(c.right?c.right.count:0)+1}
function Re(a,b){Se(b)?(b.parent.left=b.left,b.left.parent=b.parent):Te(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.u=b.left,a.u.parent=null);var c=b.left;b.left=b.left.right;null!=b.left&&(b.left.parent=b);c.right=b;b.parent=c;c.count=b.count;b.count-=(c.left?c.left.count:0)+1}
function Ne(a,b){if(null!=b.left||null!=b.right){var c=null,d;if(null!=b.left){d=Ue(a,b.left);Ge(a,function(a){a.count--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.T&&(a.T=d)}else{d=Pe(a,b.right);Ge(a,function(a){a.count--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=
b.parent;d.left=b.left;d.left&&(d.left.parent=d);b==a.U&&(a.U=d)}d.count=b.count;Se(b)?b.parent.left=d:Te(b)?b.parent.right=d:a.u=d;He(a,c?c:d)}else Ge(a,function(a){a.count--;return a.parent},b.parent),Se(b)?(b.parent.left=null,b==a.U&&(a.U=b.parent),He(a,b.parent)):Te(b)?(b.parent.right=null,b==a.T&&(a.T=b.parent),He(a,b.parent)):a.clear()}function Pe(a,b){if(!b)return a.U;var c=b;Ge(a,function(a){var b=null;a.left&&(b=c=a.left);return b},b);return c}
function Ue(a,b){if(!b)return a.T;var c=b;Ge(a,function(a){var b=null;a.right&&(b=c=a.right);return b},b);return c}function Fe(a,b){this.value=a;this.parent=b?b:null;this.count=1}Fe.prototype.left=null;Fe.prototype.right=null;Fe.prototype.height=1;function Te(a){return!!a.parent&&a.parent.right==a}function Se(a){return!!a.parent&&a.parent.left==a};function Ve(a){this.D=a||De}E(Ve,Ce);function We(a,b,c){if(a.u){var d;if(c instanceof Fe)d=c;else if(c){if(Ge(a,function(a){var b=null;0<this.D(a.value,c)?(b=a.left,d=a):0>this.D(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=Pe(a);a=d;for(var e=d.left?d.left:d;null!=a;)if(null!=a.left&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=null!=a.right&&a.right!=e?a.right:a.parent;e=f}b(null)}}
function Xe(a,b,c){if(a.u){var d;if(c instanceof Fe)d=c;else if(c){if(Ge(a,B(function(a){var b=null;0<this.D(a.value,c)?b=a.left:(0>this.D(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=Ue(a);a=d;for(var e=d.right?d.right:d;null!=a;)if(null!=a.right&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=null!=a.left&&a.left!=e?a.left:a.parent;e=f}b(null)}};function U(a,b){this.key=a;this.a=b}U.prototype.toString=function(){return"ydn.db.con.simple.Node:"+this.key+(null!=this.a?":"+this.a:"")};function Ye(a,b){var c=Q(a.key,b.key);return 0===c?null!=a.a?null!=b.a?Q(a.a,b.a):1:null!=b.a?-1:0:c};function Ze(a,b,c){this.g=a;this.d=b;this.e=c;this.a={};a=this.e.keyPath;this.c=v(a)?a.join(","):a||"_ROWID_";this.a[this.c]=null;this.f=Be(this.g,this.e.getName(),this.c)+"^|"}
function $e(a,b){var c=b||a.c;if(!a.a[c]){a.a[c]=new Ve(Ye);for(var d=a.d.length,e=0;e<d;e++){var f=a.d.key(e);if(null!==f&&0==f.lastIndexOf(a.f,0)){var g=tc(f.substr(a.f.length));if(c==a.c)Ee(a.a[c],new U(g));else{var h=a.d.getItem(f);if(null!==h)if(f=Gd(a.e,c),h=ge(h),h=wd(f,h),f.multiEntry){if(v(h))for(f=0;f<h.length;f++)Ee(a.a[c],new U(h[f],g))}else Ee(a.a[c],new U(h,g))}}}}return a.a[c]}
function af(a,b,c){for(var d in a.a){var e=a.a[d];if(e)if(d==a.c)Ie(e,new U(b));else{var f=Gd(a.e,d),f=oc(c,f.keyPath);Ie(e,new U(b,f))}}}function bf(a){for(var b in a.a){var c=a.a[b];c&&c.clear()}a.a={}}
function cf(a,b,c,d){if(null==b&&(a.e.keyPath&&(b=Ld(a.e,c)),a.e.autoIncrement&&null==b)){b=a.f+qc(void 0);var e=ge(a.d.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.d.setItem(b,R(e));b=e.key_count}if(d)if(a.a[a.c]){if(a.a[a.c].contains(qc(b)))return null}else if(null!==a.d.getItem(a.f+qc(b)))return null;a.d.setItem(a.f+qc(b),R(c));d=b;for(var f in a.a)if(e=a.a[f])if(f==a.c)Ee(e,new U(d));else{var g=Gd(a.e,f),g=oc(c,g.keyPath);null!=g&&Ee(e,new U(d,g))}return b}
function df(a,b){var c=a.f+qc(b),d=a.d.getItem(c);if(null===d)return 0;a.d.removeItem(c);c=ge(d);af(a,b,c);return 1}Ze.prototype.clear=function(){bf(this);ef(this)};function ff(a,b){var c=a.d.getItem(a.f+qc(b)),d=void 0;if(null!==c)for(var d=ge(c),c=0,e=a.e.indexes.length;c<e;c++){var f=a.e.index(c);if("DATE"==f.type){var g=wd(f,d);g&&xd(f,d,new Date(g))}}return d}Ze.prototype.getName=function(){return this.e.getName()};
function gf(a,b,c){b=b||a.c;a=$e(a,b);var d=null,e=null,f=0,g=!1,h=!1;null!=c&&(null!=c.lower&&(d=new U(c.lower)),null!=c.upper&&(e=new U(c.upper)),g=c.lowerOpen,h=c.upperOpen);We(a,function(a){if(null!=a&&(a=a.value,!g||null==d||0!=Q(a.key,d.key))){if(null!=e&&(a=Q(a.key,e.key),1===a||0===a&&h))return!0;f++}},d);return f}
function ef(a,b){var c=$e(a,a.c),d=null,e=null,f=0,g=[],h=[],k=!1,m=!1;null!=b&&(null!=b.lower&&(d=new U(b.lower)),null!=b.upper&&(e=new U(b.upper)),k=b.lowerOpen,m=b.upperOpen);We(c,function(b){if(null!=b&&(b=b.value,!k||null==d||0!=Ye(b,d))){if(null!=e){var c=Ye(b,e);if(1===c||0===c&&m)return!0}var c=a.f+qc(b.key),s=a.d.getItem(c);null!==s&&(a.d.removeItem(c),f++,10>g.length&&(g.push(b.key),h.push(ge(s))))}},d);if(10>g.length)for(c=0;c<g.length;c++)af(a,g[c],h[c]);else bf(a);return f}
function hf(a,b,c,d,e,f,g,h){function k(c){if(c&&(y++,!(y<g))){var d=c.value;if(e){if(X&&null!=q&&0==Q(d.key,q.key))return;if(null!=s&&(c=Q(d.key,s.key),-1===c||0===c&&D))return!0}else{if(D&&null!=s&&0==Q(d.key,s.key))return;if(null!=q&&(c=Q(d.key,q.key),1===c||0===c&&X))return!0}c=d.key;if(!h||null!=n&&Q(n,c))d=p?d.a:c,b?m.push(d):(d=ff(a,d),m.push(d));n=c;if(u(f)&&m.length>=f)return!0}}var m=[],n;c=c||a.c;var p=c!=a.c;c=$e(a,c);var s=null,q=null;u(g)||(g=0);var y=-1,D=!1,X=!1;null!=d&&(null!=d.lower&&
(s=p&&e?new U(d.lower,"\uffff"):new U(d.lower)),null!=d.upper&&(q=p&&!e?new U(d.upper,"\uffff"):new U(d.upper)),D=d.lowerOpen,X=d.upperOpen);e?Xe(c,k,q):We(c,k,s);return m}Ze.prototype.fa=function(a,b,c,d,e){return hf(this,!0,a,b,c,d,e)};Ze.prototype.toString=function(){return"ydn.db.con.simple.Store:"+this.g+":"+this.e.getName()};function jf(a,b){this.h=a;this.a=b}function kf(a,b,c){dd(function(){b.call(c,this.h)},0,a);return function(){a.a("complete",null);a.a=null;a.h=null}};function lf(){this.clear()}r=lf.prototype;r.Xa=function(){return this};r.setItem=function(a,b){u(this.a[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.a[a]=b};r.getItem=function(a){return u(this.a[a])?this.a[a]:null};r.removeItem=function(a){delete this.a[a];Pa(this.keys,a.toString());this.length=this.keys.length};r.length=0;r.key=function(a){a=this.keys[a];return u(a)?this.a[a]:null};r.clear=function(){this.a={};this.keys=[];this.length=0};function mf(a){this.f=a||new lf;this.c=NaN}r=mf.prototype;r.b=J("ydn.db.con.SimpleStorage");r.ob=l("c");
r.wa=function(a,b){function c(a,b){dd(function(){b?(H(d.b,d+" opening fail"),e.r(b)):(H(d.b,d+" version "+d.ob()+" open"),e.s(a))})}var d=this,e=new K;this.h=this.f.Xa(a);this.da=a;this.a=b;this.d={};var f=Be(this.da);this.c=NaN;var g=ge(this.h.getItem(f));u(g.version)&&!z(g.version)&&(g.version=NaN);if(g)if(g=new Pd(g),Sd(this.a,g))if(!this.a.sa&&!isNaN(g.version)&&this.a.version>g.version)c(NaN,new pe("existing version "+g.version+" is larger than "+this.a.version));else{var h=this.a.version;this.c=
u(h)?h:g.version+1;for(h=0;h<this.a.count();h++)var k=this.a.ia(h);if(this.a instanceof ye)for(h=0;h<g.count();h++)k=g.ia(h),ke(this.a,k);h=this.a.toJSON();h.version=this.c||NaN;this.h.setItem(f,R(h));c(g.version||NaN)}else{for(h=0;h<this.a.count();h++)k=this.a.ia(h);this.c=g.version||NaN;c(this.c)}else g=b.toJSON(),this.c=1,g.version=this.c,this.h.setItem(f,R(g)),c(NaN);return e};r.Ta=function(){return!!this.da};r.Qb=function(){return this.h||null};r.ka=ca("memory");r.nb=aa();
r.$a=function(a,b,c,d){a(new jf(this,function(a,b){d(a,b)}))};r.N=function(a){dd(function(){var b=Be(this.da),b=this.h.getItem(b),b=new Pd(b);a(b)},0,this)};function nf(a,b){var c=S(a.a,b);if(c)a.d[b]||(a.d[b]=new Ze(a.da,a.h,c));else throw new sd('store name "'+b+'" not found.');return a.d[b]}r.toString=function(){return"SimpleStorage:"+this.ka()+":"+(this.da+":"+this.c)};function of(){mf.call(this,this)}E(of,mf);of.prototype.Xa=function(){return window.localStorage};of.prototype.ka=ca("localstorage");function pf(a){var b=new of,c=new ye;b.wa(a,c);b.N(function(a){for(var c=0;c<a.stores.length;c++)nf(b,a.stores[c].name).clear()})}function qf(){mf.call(this,this)}E(qf,mf);qf.prototype.Xa=function(){return window.sessionStorage};qf.prototype.ka=ca("sessionstorage");
function rf(a){var b=new qf,c=new ye;b.wa(a,c);b.N(function(a){for(var c=0;c<a.stores.length;c++)nf(b,a.stores[c].name).clear()})};var Q=je&&je.cmp?B(je.cmp,je):yc;function sf(a,b,c,d){this.a=a;this.c=[];this.d=[];this.g=[];this.p=0;this.Ab=this.L=!1;b&&(this.c=Qa(b.c),this.d=Qa(b.d));null!=c&&(this.c[0]=c);null!=d&&(this.d[0]=d);this.e=function(){throw new sd;};this.f=function(){throw new sd;};0<this.a.length&&tf(this)}r=sf.prototype;r.p=0;r.L=!1;r.Ab=!1;r.b=J("ydn.db.Cursor");
function uf(a,b){b.F=function(c,e,f){null==c&&(I(a.b,"cursor "+b+" finished."),a.L=!0);a.c[0]=c;a.d[0]=e;a.g[0]=f;a.p++;a.L?(I(a.b,a+" DONE."),a.e(),vf(a)):(I(a.b,a+" new cursor position {"+(null!=a.d[0]?a.c[0]+", "+a.d[0]:a.c[0])+"}"),a.e(a.c[0]))};b.Ka=function(b){a.f(b);vf(a);a.L=!0};var c=null!=a.d[0]?", "+a.d[0]:"",c=null!=a.c[0]?" resume from {"+a.c[0]+c+"}":"";I(a.b,b+c+" opening");b.xa(a.c[0],a.d[0])}
function wf(a){function b(b){var f=a.a[b];f.F=function(k,n,p){d++;null==k&&(I(a.b,"cursor "+f+" finished."),a.L=!0);a.c[b]=k;a.d[b]=n;a.g[b]=p;e[b]=f.c?n:k;if(d==c){d=0;if(a.L)a.p++,I(a.b,a+" DONE."),a.e(),vf(a);else if(k=e.reduce(function(a,b){return null===a?b:1==Q(b,a)?b:a},null),0==Q(k,e[0]))I(a.b,a+" new cursor position {"+(null!=a.d[0]?a.c[0]+", "+a.d[0]:a.c[0])+"}"),a.e(a.c[0]);else for(n=0;n<c;n++)-1==Q(e[n],k)?(p=a.a[n],p.c?p.Ua(k):p.la(k)):d++;Oa(e)}};f.Ka=function(b){a.f(b);vf(a);a.L=!0;
d=0};var k=null!=a.d[b]?", "+a.d[b]:"",k=null!=a.c[b]?" resume from {"+a.c[b]+k+"}":"";I(a.b,f+k+" opening");f.xa(a.c[b],a.d[b])}for(var c=a.a.length,d=0,e=[],f=0;f<c;f++)b(f)}function tf(a){var b=a.a.length;if(1==b)uf(a,a.a[0]);else if(1<b)wf(a);else throw new sd("no cursors");}r.Da=l("p");r.jc=function(a){return this.c[a||0]};r.P=function(a){a=a||0;return this.a[a].c?this.d[a]:this.c[a]};r.ba=function(a){a=a||0;return this.a[a].Ga?this.P(a):this.g[a]};r.advance=function(a){for(var b=0;b<this.a.length;b++)this.a[b].advance(a)};
r.update=function(a,b){return this.a[b||0].update(a)};r.clear=function(a){return this.a[a||0].clear()};function xf(a){a.Ab=!0;I(a.b,a+": exit");vf(a);for(var b=0;b<a.a.length;b++)a.a[b].Ha();I(a.b,a+" disposed");Oa(a.g);Oa(a.a)}function vf(a){a.d=Ia(a.d,function(a){if(null!=a)return fd(a)});a.c=Ia(a.c,function(a){if(null!=a)return fd(a)})}
r.toString=function(){for(var a="[",b=0;b<this.c.length;b++)0<b&&(a+=" "),this.a[b]?a+=this.a[b].toString():(a+="cursor~{"+this.c[b],a=null!=this.d[b]?a+(";"+this.d[b]+"}"):a+"}");return"Cursor "+(a+"]")};function yf(a,b,c,d,e){if(!(b instanceof O))if(x(b)&&u(c))b=od(b,c,d,e);else if(null!=b){if(!(b instanceof O))if(A(b))b=new O(b.lower,b.upper,b.lowerOpen,b.upperOpen);else throw new P("Invalid key range: "+b+" of type "+typeof b);}else b=null;this.a=b;this.ja=a}yf.prototype.ja="";yf.prototype.xb=function(a){if(this.ja!=a.ja)return null;a=null!=this.a&&null!=a.a?this.a.xb(a.a):this.a||a.a;return new yf(this.ja,a)};function V(a,b,c,d,e,f,g){if(!x(a))throw new TypeError("store name");this.I=a;this.f=b;this.j=g;this.e=!!this.f;this.c=u(f)?f:!!x(this.f);if(!fa(this.c))throw new TypeError("key_only");if(u(d)&&!fa(d))throw new TypeError("reverse");if(u(e)&&!fa(e))throw new TypeError("unique");a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.g=a;if(d=kd(c))throw new P("Invalid key range: "+d);this.a=id(c);this.d=null}V.prototype.c=!0;
function zf(a,b,c){if(3<arguments.length)throw new P("too many argument");V.call(this,a,void 0,b,c,void 0,!0)}E(zf,V);function Af(a,b,c,d,e){if(!x(b))throw new P("index name must be string");V.call(this,a,b,c,d,e,!0)}E(Af,V);function Bf(a,b,c){if(3<arguments.length)throw new P("too many argument");V.call(this,a,void 0,b,c,void 0,!1)}E(Bf,V);function Cf(a,b,c,d,e){if(!x(b))throw new P("index name must be string");V.call(this,a,b,c,d,e,!1)}E(Cf,V);r=V.prototype;
r.Zb=function(){return this.d?this.d.L?"done":this.d.Ab?"rest":"busy":"init"};r.b=J("ydn.db.Iterator");r.Kc=l("I");r.R=l("f");r.yc=l("a");r.Ic=function(){return this.a?this.a instanceof jd?this.a:jd.bound(this.a.lower,this.a.upper,this.a.lowerOpen,this.a.upperOpen):null};r.Lc=l("c");r.xc=l("e");r.toJSON=function(){return{store:this.I,index:this.f,keyRange:this.a?gd(this.a):null,direction:this.g}};
r.toString=function(){var a=u(this.j)?":"+this.j.join(","):u(this.f)?":"+this.f:"",a=a+ld(this.a),b=this.e?"Index":"",b=b+(this.c?"Key":"Value");return b+"Iterator:"+this.I+a};r.Hc=function(){return this.d?this.d.jc():void 0};r.Jc=function(){return this.d?this.d.P():void 0};r.Dc=function(a,b){var c=new V(this.I,this.f,this.a,this.mb(),this.Pa(),this.c,this.j);c.d=new sf([],null,a,b);return c};
r.Nc=function(a,b){var c=new V(this.I,this.f,this.a,!this.mb(),this.Pa(),this.c,this.j);null!=a&&(c.d=new sf([],null,a,b));return c};r.count=function(){return this.d?this.d.Da():NaN};r.stores=function(){var a=[this.I];if(this.m)for(var b=0;b<this.m.length;b++)0<=Ga(a,this.m[b].a)||a.push(this.m[b].a);return a};r.mb=function(){return"prev"===this.g||"prevunique"===this.g};r.Pa=function(){return"nextunique"===this.g||"prevunique"===this.g};
r.V=function(a,b){var c;c=[b];c=this.a?new O(null!=this.a.lower?c.concat(this.a.lower):c,null!=this.a.upper?c.concat(this.a.upper):c,!!this.a.lowerOpen,!!this.a.upperOpen):this.e?hd(c):O.only(b);var d,e;this.j?e=[a].concat(this.j):this.e?e=[a].concat(this.f):d=a;return new V(this.I,d,c,this.mb(),this.Pa(),this.c,e)};
function Df(a,b,c,d,e){var f=e||2;e=[d.c(b,c,a.I,a.j||a.f,a.a,a.g,a.c,f)];for(var g=0,h=a.m?a.m.length:0;g<h;g++){var k=a.m[g];if(k.c&&null!=k.value){var m;m=a.e?id(hd([k.value])):jd.only(k.value);k=d.c(b,c,k.a,k.c,m,a.g,a.c,f);e.push(k)}}b="";a.d&&(b=" by resuming "+a.d);a.d=new sf(e,a.d);I(a.b,c+" "+a+" created "+a.d+b);return a.d}r.Mc=function(){if("busy"==this.Zb())throw new Zd("busy");this.d=null};function Ef(a,b){this.da=a;this.a=b}Ef.prototype.b=J("ydn.db.crud.req.RequestExecutor");Ef.prototype.da="";Ef.prototype.toString=ca("RequestExecutor");Ef.prototype.R=function(a,b){return(v(b)?Id(a,b):Gd(a,b)).getName()};C("ydn.db.con.IStorage.prototype.transaction",aa().prototype.transaction);function Ff(a,b,c,d){if("transaction"in a)this.j=a,this.e=this.g=null;else if("objectStore"in a){if(this.j=null,this.g=a.db,this.e=a,!this.e.db.objectStoreNames.contains(b))throw new Td('store "'+b+'" not in transaction.');}else throw new Td("storage instance require.");this.m=b;this.B=c;this.Ha=d;this.c=[];this.a=0;this.f=!1}Ff.prototype.b=J("ydn.db.con.IdbCursorStream");Ff.prototype.f=!1;Ff.prototype.c=[];
function Gf(a,b){a.a++;b.onsuccess=function(b){if(b=b.target.result){if(ga(a.Ha)){var d=b.value;a.Ha(b.primaryKey,null!=a.B?d[a.B]:d)}else G(a.b,"sink gone, dropping value for: "+b.primaryKey);if(b&&0<a.c.length)b["continue"](a.c.shift());else a.a--,0==a.a&&a.Z&&a.Z()}};b.onerror=function(){G(a.b,"seeking fail. "+("error"in b?b.error.name+":"+b.error.message:""));a.a--;0==a.a&&a.Z&&a.Z()}}function Hf(a,b){0==a.c.length&&0==a.a?b():a.Z=b}
function If(a){if(!a.f){var b=function(b,c){a.e=null;"complete"!==b&&G(a.b,c.name+":"+c.message);I(a.b,a+" transaction "+b)},c=function(b){var c=a.c.shift();I(a.b,a+" transaction started for "+c);b=b.objectStore(a.m);Gf(a,b.openCursor(c))};if(a.e)I(a.b,a+" using existing tx."),c(a.e);else if(a.g)I(a.b,a+" creating tx from IDBDatabase."),a.d=a.g.transaction([a.m],L),a.d.oncomplete=function(a){b("complete",a)},a.d.onerror=function(a){b("error",a)},a.d.onabort=function(a){b("abort",a)};else if(a.j)I(a.b,
a+" creating tx from ydn.db.con.IStorage."),a.f=!0,a.j.transaction(function(b){a.f=!1;c(b)},[a.m],L,b);else throw new Wd("no way to create a transaction provided.");}};function Jf(a,b,c){if(a&&a instanceof W)this.Sa=a,this.ca=null;else if(a&&a.db)if(this.Sa=null,a.db)this.ca=new Ff(a,this.a,this.va,B(this.Z,this));else throw new P("Invalid IndexedDB Transaction.");else throw new P("ydn.db.Streamer: First argument requires storage or transaction instance required.");if(!x(b))throw new P("a store name required.");this.a=b;if(u(c)&&!x(c))throw new P("index name must be a string.");this.va=c;this.ca=null;this.X=[];this.ha=[];this.Fa=!1}r=Jf.prototype;r.b=J("ydn.db.Streamer");
r.Sa=null;r.h=null;r.Pb=null;r.ha=[];r.X=[];r.ca=null;r.Gc=function(a){this.Pb=a};function Kf(a){var b=0<a.X.length;if(b&&!a.Fa&&ga(a.Pb)){var c=function(){Kf(a)},d=a.ha.shift(),e=a.X.shift(),b=0<a.X.length,c=a.Pb(d,e,b?c:null);b&&!c&&Kf(a)}}r.Fa=!1;r.Qc=function(a){if(this.ca){this.Fa=!0;var b=this;Hf(this.ca,function(){a(b.ha,b.X);b.ha=[];b.X=[];b.Fa=!1})}else a(this.ha,this.X),this.ha=[],this.X=[]};r.Z=function(a,b){this.ha.push(a);this.X.push(b);Kf(this)};
r.push=function(a,b){if(this.Fa)throw new Zd("push not allowed after a collection is started");if(2<=arguments.length)this.Z(a,b);else{if(!this.ca){if(!this.Sa)throw new Zd("Database is not setup.");var c=this.Sa.j();if(c)if("indexeddb"===c)this.ca=new Ff(this.Sa,this.a,this.va,B(this.Z,this));else throw new Vd(c);else throw new Zd("Database is not connected.");}c=this.ca;c.c.push(a);If(c)}};r.R=l("va");r.toString=function(){return"Streamer:"+this.a+(this.va||"")};function Lf(a,b,c,d,e,f,g,h){zc.call(this);this.qb=c;this.g=d;this.c=x(this.g);this.k=e||null;this.d=a;this.ib=b;this.l="prev"==f||"prevunique"==f;this.unique="nextunique"==f||"prevunique"==f;this.Q=f;this.Ga=g;this.j=h}E(Lf,zc);r=Lf.prototype;r.qb="";r.Q="";r.k=null;r.unique=!1;r.l=!1;r.Ga=!0;r.Ka=function(){throw new sd;};r.F=function(){throw new sd;};r.qa=function(){this.d=null};r.toString=function(){return"Cursor:"+this.qb+(u(this.g)?":"+this.g:"")+"["+(this.d?"":"~")+this.ib+"]"};function Mf(a,b){if(null!=a&&!("push"in a))throw new Td;this.a=a||null;this.g=b;this.f=0}Mf.prototype.b=J("ydn.db.algo.AbstractSolver");Mf.prototype.a=null;Mf.prototype.c=function(a){if(!v(a))throw new TypeError("iterators must be array");if(2>a.length)throw new RangeError("ZigzagMerge require at least 2 iterators, but  only "+a.length+" found.");for(var b=0;b<a.length;b++)if(!(a[b]instanceof V))throw new TypeError("item at iterators "+b+" is not an iterator.");return!1};
function Nf(a,b,c){var d,e=null!=d;if(!u(d)){d=c[0];for(var e=null!=d,f=1;e&&f<c.length;f++)null!=c[f]&&0==Q(c[f],d)||(e=!1)}return e&&(a.f++,a.a&&a.a.push(d),u(a.g)&&a.f>=a.g)?[]:b}Mf.prototype.d=function(){return[]};function Of(a,b,c,d,e,f,g,h){Lf.call(this,a,b,c,d,e,f,g,h);this.t=null}E(Of,Lf);r=Of.prototype;r.b=J("ydn.db.core.req.IDBCursor");r.Za=function(a){(a=a.target.result)?this.F(a.key,this.c?a.primaryKey:void 0,a.value):this.F()};r.t=null;
r.xa=function(a,b){function c(a,b,c){h.t=g;h.F(a,h.c?b:void 0,c);h.t&&(h.t.onsuccess=B(h.Za,h));g=null}var d=this+" opening ";null!=a&&(d+="{"+a,d=null!=b?d+(";"+b+"}"):d+"}");I(this.b,d);var d=this.k,e=this.d.objectStore(this.qb),f=x(this.g)?e.index(this.g):null,g;g=this.Ga?f?null!=this.Q?f.openKeyCursor(d,this.Q):null!=d?f.openKeyCursor(d):f.openKeyCursor():null!=this.Q?e.openCursor(d,this.Q):null!=d?e.openCursor(d):e.openCursor():f?null!=this.Q?f.openCursor(d,this.Q):null!=d?f.openCursor(d):f.openCursor():
null!=this.Q?e.openCursor(d,this.Q):null!=d?e.openCursor(d):e.openCursor();var h=this;g.onerror=function(a){var b=g.error;a.preventDefault();h.Ka(b)};null!=a?g.onsuccess=function(d){if(d=d.target.result){var e=je.cmp(d.key,a),f=h.l?-1:1;if(e==f)c(d.key,d.primaryKey,d.value);else if(e==-f)d["continue"](a);else if(null!=b)if(je.cmp(d.primaryKey,b)==f)c(d.key,d.primaryKey,d.value);else d["continue"]();else d["continue"]()}else c()}:(h.t=g,h.t.onsuccess=B(h.Za,h))};r.fb=function(){return!!this.t};
r.update=function(a){var b=this.t.result;if(b){var c=new K;a=b.update(a);a.onsuccess=function(a){c.s(a.target.result)};a.onerror=function(a){a.preventDefault();c.r(a)};return c}throw new me("cursor gone");};r.clear=function(){var a=this.t.result;if(a){var b=new K,a=a["delete"]();a.onsuccess=function(){b.s(1)};a.onerror=function(a){a.preventDefault();b.r(a)};return b}throw new me("cursor gone");};r.Va=function(a,b){I(this.b,this+" restarting.");this.xa(b,a)};
r.advance=function(a){var b=this.t.result;if(1==a)b["continue"]();else b.advance(a)};r.Ua=function(a){var b=this.t.result,c=je.cmp(a,b.primaryKey);if(1!=c)throw new sd('continuing primary key "'+a+'" must higher than current primary key "'+b.primaryKey+'"');var d=this;this.t.onsuccess=function(e){if(b=e.target.result)if(c=je.cmp(b.primaryKey,a),0==c||1==c&&!d.l||-1==c&&d.l)d.t.onsuccess=B(d.Za,d),d.F(b.key,d.c?b.primaryKey:void 0,b.value);else b["continue"]();else d.t.onsuccess=B(d.Za,d),d.F()};b["continue"]()};
r.la=function(a){var b=this.t.result;if(null!=a)b["continue"](a);else b["continue"]()};r.qa=function(){Of.A.qa.call(this);this.t=null};r.toString=function(){return"IDB"+Of.A.toString.call(this)};function Pf(a,b){Ef.call(this,a,b)}E(Pf,Ef);r=Pf.prototype;r.b=J("ydn.db.crud.req.IndexedDb");r.Ya=function(a,b,c,d){function e(b){var h=a.objectStore(d[b]).count();h.onsuccess=function(a){f[b]=a.target.result;b++;b==d.length?(c(f),c=null):e(b)};h.onerror=function(a){a.preventDefault();c(h.error,!0);c=null}}var f=[];I(this.b,b+" countStores: "+d);0==d.length?(c([]),c=null):e(0)};
r.vb=function(a,b,c,d,e,f){a=a.objectStore(d);I(this.b,b+" addObject: "+d+" "+f);var g;g=u(f)?a.add(e,f):a.add(e);g.onsuccess=function(a){c(a.target.result)};g.onerror=function(a){a.preventDefault();c(g.error,!0)}};
r.Jb=function(a,b,c,d,e,f){a=a.objectStore(d);I(this.b,b+' putObject to store "'+d+'" '+(u(f)?" key: "+f:""));var g;g=u(f)?a.put(e,f):a.put(e);g.onsuccess=function(a){c(a.target.result)};g.onerror=function(a){"DataError"==a.name&&(a=R(e),a=new oe(d+": "+a.substring(0,70)));a.preventDefault();c(g.error,!0)}};
r.wb=function(a,b,c,d,e,f){function g(a){var q;q=null!=f?p.add(e[a],f[a]):p.add(e[a]);q.onsuccess=function(b){k++;h[a]=b.target.result;k==e.length?c(h,n):(b=a+10,b<e.length&&g(b))};q.onerror=function(f){k++;var p=q.error;G(m.b,b+' add request to "'+d+'" cause '+p.name+' for object "'+T(e[a])+'" at index '+a+" of "+e.length+" objects.");h[a]=p;n=!0;f.preventDefault();k==e.length?c(f.target.transaction,n):(f=a+10,f<e.length&&g(f))}}var h=[],k=0,m=this,n=!1,p=a.objectStore(d);I(this.b,b+" addObjects: "+
d+" "+e.length+" objects");if(0<e.length)for(a=0;10>a&&a<e.length;a++)g(a);else c([])};
r.Kb=function(a,b,c,d,e,f){function g(a){var q;q=null!=f?p.put(e[a],f[a]):p.put(e[a]);q.onsuccess=function(b){k++;h[a]=b.target.result;k==e.length?m?c(h,!0):c(h):(b=a+10,b<e.length&&g(b))};q.onerror=function(f){k++;var p=q.error;G(n.b,b+' put request to "'+d+'" cause '+p.name+' for object "'+T(e[a])+'" at index '+a+" of "+e.length+" objects.");h[a]=p;m=!0;f.preventDefault();k==e.length?m?c(h,!0):c(h):(f=a+10,f<e.length&&g(f))}}var h=[],k=0,m=!1,n=this,p=a.objectStore(d);I(this.b,b+" put "+e.length+
' objects to store "'+d+'"');if(0<e.length)for(a=0;10>a&&a<e.length;a++)g(a);else c([])};
r.Ib=function(a,b,c,d,e){function f(b){var c=e[b],q=c.a,y=a.objectStore(q),D;D=null===y.keyPath?y.put(d[b],c.id):y.put(d[b]);D.onsuccess=function(a){k++;h[b]=a.target.result;k==d.length?g():(a=b+10,a<d.length&&f(a))};D.onerror=function(a){k++;G(n.b,"request result "+a.name+' error when put keys to "'+q+'" for object "'+T(d[b])+'" at index '+b+" of "+d.length+" objects.");h[b]=D.error;m=!0;a.preventDefault();k==d.length?g():(a=b+10,a<d.length&&f(a))}}function g(){m?c(h,!0):c(h)}var h=[],k=0,m=!1,n=
this;I(this.b,b+" putByKeys: of "+d.length+" objects");if(0<d.length)for(b=0;10>b&&b<d.length;b++)f(b);else g()};r.jb=function(a,b,c,d,e){a=a.objectStore(d);I(this.b,b+" clearById: "+d+" "+e);var f=a.openCursor(jd.only(e));f.onsuccess=function(a){var b=a.target.result;b?(b=b["delete"](),b.onsuccess=function(){c(1)},b.onerror=function(){c(a,!0)}):c(void 0)};f.onerror=function(a){a.preventDefault();c(f.error,!0)}};
r.Mb=function(a,b,c,d){function e(b){b++;if(b>=d.length){var n=0<k.length;c(n?k:f,n)}else{d[b].a!=g&&(g=d[b].a,h=a.objectStore(g));var p=h["delete"](d[b].id);p.onsuccess=function(){f++;e(b)};p.onerror=function(a){a.preventDefault();k[b]=p.error;e(b)}}}var f=0,g,h;I(this.b,b+" removeByKeys: "+d.length+" keys");var k=[];e(-1)};
r.kb=function(a,b,c,d,e){var f=this,g=a.objectStore(d),h=g.count(e),k=b+" clearByKeyRange: "+d+" "+e;I(this.b,k);h.onsuccess=function(a){var b=a.target.result;a=g["delete"](e);a.onsuccess=function(){c(b)};a.onerror=function(){c(h.error,!0)}};h.onerror=function(a){I(f.b,"count error "+k);a.preventDefault();c(h.error,!0)}};
r.zb=function(a,b,c,d,e){a=a.objectStore(d);I(this.b,b+" clearByKeyRange: "+d+" "+e);var f=a["delete"](e);f.onsuccess=function(){c(void 0)};f.onerror=function(a){a.preventDefault();c(f.error,!0)}};
r.Lb=function(a,b,c,d,e,f){a=a.objectStore(d).index(e);I(this.b,b+" clearByIndexKeyRange: "+d+":"+e+" "+f);var g=[],h=a.openCursor(f),k=0;h.onsuccess=function(a){var b=a.target.result;if(b){var d=b["delete"]();d.onsuccess=function(){k++;b["continue"]()};d.onerror=function(a){g.push(d.error);a.preventDefault();b["continue"]()}}else a=0<g.length,c(a?g:k,a)};h.onerror=function(a){a.preventDefault();c(h.error,!0)}};
r.Wa=function(a,b,c,d){var e=d.length,f=0;I(this.b,b+" clearByStores: "+d);for(b=0;b<e;b++){var g=a.objectStore(d[b]).clear();g.onsuccess=function(){f++;f==e&&c(f)};g.onerror=function(a){f++;a.preventDefault();f==e&&c(g.error,!0)}}};
function Qf(a,b,c,d,e,f,g,h,k,m,n){var p=[];b=b.objectStore(e);var s=nc(h,n);e=c+" listByKeyRange: "+e+(f?":"+f:"")+(g?R(g):"");h&&(e+=" reverse");n&&(e+=" unique");I(a.b,e);var q;q=f?b.index(f).openCursor(g,s):b.openCursor(g,s);var y=!1;q.onsuccess=function(b){if(b=b.target.result)if(!y&&0<m)y=!0,b.advance(m);else if(p.push(b.value),p.length<k)b["continue"]();else I(a.b,c+" success "+p.length+" objects"),d(p);else I(a.b,c+" success "+p.length+" objects"),d(p)};q.onerror=function(a){a.preventDefault();
d(q.error,!0)}}r.Ja=function(a,b,c,d,e,f,g,h){Qf(this,a,b,c,d,null,e,f,g,h)};r.Ia=function(a,b,c,d,e,f,g,h,k,m){Qf(this,a,b,c,d,e,f,g,h,k,m)};r.Db=function(a,b,c,d,e,f,g,h){var k=[];a=a.objectStore(d);f=nc(f);I(this.b,b+" keysByKeyRange: "+d+" "+e);var m=a.openCursor(e,f),n=!1;m.onsuccess=function(a){if(a=a.target.result)if(!n&&0<h)n=!0,a.advance(h);else if(k.push(a.key),k.length<g)a["continue"]();else c(k);else c(k)};m.onerror=function(a){a.preventDefault();c(m.error,!0)}};
r.Cb=function(a,b,c,d,e,f,g,h,k,m){var n=[];a=a.objectStore(d).index(e);I(this.b,b+" keysByStore: "+d+":"+e+" "+f);var p=a.openKeyCursor(f,nc(g,m)),s=!1;p.onsuccess=function(a){if(a=a.target.result)if(!s&&0<k)s=!0,a.advance(k);else{if(n.push(a.primaryKey),n.length<h)a["continue"]()}else c(n)};p.onerror=function(a){a.preventDefault();c(p.error,!0)}};
r.bb=function(a,b,c,d,e){var f=this;I(this.b,b+" getById: "+d+":"+e);var g=a.objectStore(d).get(e);g.onsuccess=function(a){I(f.b,b+" record "+e+(null!=a.target.result?" ":" not ")+" exists.");c(a.target.result)};g.onerror=function(a){a.preventDefault();c(g.error,!0)}};
r.Eb=function(a,b,c,d,e){function f(a){if(null==e[a])if(h++,g[a]=void 0,h==m)c(g);else{var b=a+10;b<m&&f(b)}var d;d=k.get(e[a]);d.onsuccess=function(b){h++;g[a]=b.target.result;h==m?c(g):(b=a+10,b<m&&f(b))};d.onerror=function(a){h++;a.preventDefault();c(d.error,!0)}}var g=[];g.length=e.length;var h=0,k=a.objectStore(d),m=e.length;I(this.b,b+" listByIds: "+d+":"+m+" ids");if(0<m)for(a=0;10>a&&a<m;a++)f(a);else c([])};
r.Fb=function(a,b,c,d){function e(b){var k=d[b],m=a.objectStore(k.a).get(k.id);m.onsuccess=function(a){g++;f[b]=a.target.result;g==d.length?c(f):(a=b+10,a<d.length&&e(a))};m.onerror=function(a){g++;a.preventDefault();c(m.error,!0)}}var f=[];f.length=d.length;var g=0;I(this.b,b+" listByKeys: "+d.length+" ids");if(0<d.length)for(b=0;10>b&&b<d.length;b++)e(b);else c([])};
r.oa=function(a,b,c,d,e,f){a=a.objectStore(d);b=b+" countKeyRange: "+d+(f?":"+f:"")+(e?":"+R(e):"");I(this.b,b);var g;null!=f?(f=a.index(f),g=null!=e?f.count(e):f.count()):g=null!=e?a.count(e):a.count();g.onsuccess=function(a){c(a.target.result)};g.onerror=function(a){a.preventDefault();c(g.error,!0)}};function Rf(a,b){Ef.call(this,a,b)}E(Rf,Pf);Rf.prototype.b=J("ydn.db.core.req.IndexedDb");Rf.prototype.e=function(a,b,c,d,e,f){Tf(this,1,a,b,c,d,e,f)};
function Tf(a,b,c,d,e,f,g,h){var k=[],m=1==b,n=d+" "+(m?"keys":2==b?"values":3==b?"count":"")+"ByIterator "+f;0<g&&(n+=" limit "+g);H(a.b,n);var p=Df(f,c,d,a,b);p.f=function(b){H(a.b,"error:"+n);xf(p);e(b,!0)};var s=0,q=!1,y=!1;p.e=function(b){y||(I(a.b,n+" starting"),y=!0);if(null!=b){var c=f.e?p.P():b;!q&&0<h?(p.advance(h),q=!0):(s++,m?k.push(b):k.push(f.c?c:p.ba()),!u(g)||s<g?p.a[0].la(void 0):(H(a.b,"success:"+n+" "+k.length+" records"),xf(p),e(k)))}else H(a.b,"success:"+n+" "+k.length+" records"),
xf(p),e(k)}}Rf.prototype.d=function(a,b,c,d,e,f){Tf(this,2,a,b,c,d,e,f)};Rf.prototype.c=function(a,b,c,d,e,f,g,h){var k=S(this.a,c);u(d)&&(d=this.R(k,d));return new Of(a,b,c,d,e,f,g,h)};function Uf(){this.a=!1}Uf.prototype.a=!1;function Vf(a,b,c,d,e,f,g,h,k){Lf.call(this,a,b,d,e,f,g,h,k);this.lb=this.Ma=this.ta=void 0;this.Hb=this.m=this.e=this.a=null;this.f=new Uf}E(Vf,Lf);r=Vf.prototype;r.b=J("ydn.db.core.req.SimpleCursor");r.fb=function(){return!!this.d};r.update=function(){throw new qd;};r.advance=function(a){function b(b){d++;if(!b||d>=a)return Wf(c,b)}var c=this,d=this.a?-1:0;this.l?Xe(this.e,b,this.a):We(this.e,b,this.a)};
r.la=function(a){if(null!=a){var b=this,c=new U(a),d=function(c){b.a=c;if(!c)return Wf(b,c);var d=Q(c.value.key,a);if(b.l){if(1!=d)return Wf(b,c)}else if(-1!=d)return Wf(b,c)};this.l?Xe(this.e,d,c):We(this.e,d,c)}else this.advance(1)};function Xf(a){dd(function(){a.f.a?(a.f.a=!1,this.F(this.ta,this.Ma,this.lb),Xf(this)):(this.Hb(),this.Hb=null)},0,a)}
function Wf(a,b){if(a.a=b){var c=b.value;if(a.k)if(a.l||null==a.k.upper)a.l&&null!=a.k.lower&&(d=Q(c.key,a.k.lower),-1==d||0==d&&a.k.lowerOpen)&&(a.a=null);else{var d=Q(c.key,a.k.upper);if(1==d||0==d&&a.k.upperOpen)a.a=null}if(a.a){if(a.unique&&(null!=a.ta&&null!=c.key)&&0==Q(a.ta,c.key))return;a.ta=c.key;a.Ma=a.c?c.a:a.ta;2==a.j&&(a.Ga?a.lb=a.Ma:a.lb=ff(a.m,a.Ma))}}a.a||(a.ta=void 0,a.Ma=void 0,a.lb=void 0);return a.f.a=!0}
r.xa=function(a,b){var c=null;this.k&&(this.l?null!=this.k.upper&&(c=new U(this.k.upper)):null!=this.k.lower&&(c=new U(this.k.lower)));null!=a&&(c=this.c?new U(a,b):new U(a));this.Hb=kf(this.d,function(d){function e(c){var d=c.value,e=d.key;if(c&&null!=e)if(null!=a)if(null!=b){if(d=d.a,null!=d&&0==Q(a,e)&&0==Q(b,d))return}else{if(0==Q(a,e))return}else if(this.k&&(!this.l&&(this.k.lowerOpen&&null!=this.k.lower)&&(d=Q(e,this.k.lower),0==d)||this.l&&(this.k.upperOpen&&null!=this.k.upper)&&(d=Q(e,this.k.upper),
0==d)))return;return Wf(this,c)}this.m=nf(d,this.qb);this.e=$e(this.m,this.g);this.l?Xe(this.e,B(e,this),c):We(this.e,B(e,this),c);Xf(this)},this)};r.clear=function(){throw new qd;};r.Va=function(){throw new qd;};r.Ua=function(){throw new qd;};r.toString=function(){return"Simple"+Vf.A.toString.call(this)};function Yf(a,b){Ef.call(this,a,b)}E(Yf,Ef);r=Yf.prototype;r.b=J("ydn.db.crud.req.SimpleStore");r.Cb=function(a,b,c,d,e,f,g,h,k){b=b+" keysByIndexKeyRange "+d+":"+e+" "+(f?T(f):"");I(this.b,b);var m=kf(a,function(a){a=nf(a,d).fa(e,f,g,h,k);c(a);m();m=null},this)};r.Db=function(a,b,c,d,e,f,g,h){b=b+" keysByKeyRange "+d+" "+(e?T(e):"");I(this.b,b);var k=kf(a,function(a){a=nf(a,d).fa(null,e,f,g,h);c(a);k();k=null},this)};r.Ib=function(a,b,c,d,e){Zf(this,a,b,c,null,d,e,!0,!1)};
function Zf(a,b,c,d,e,f,g,h,k){I(a.b,c+" "+(h?"put":"add")+"Object"+(k?"":"s "+f.length+" objects"));var m=kf(b,function(a){var b;if(k)b=nf(a,e),a=cf(b,g,f,!h),null!=a?d(a):(a=T(a),a=new ne(a),d(a,!0));else{for(var c=e,q=[],y=!1,D=g||{},X=0;X<f.length;X++){var N;e?N=D[X]:(c=g[X],N=c.id,c=c.a);b&&b.getName()==c||(b=nf(a,c));N=cf(b,N,f[X],!h);null!=N||(y=!0);q.push(N)}d(q,y)}m();m=null},a)}r.vb=function(a,b,c,d,e,f){Zf(this,a,b,c,d,e,f,!1,!0)};r.Jb=function(a,b,c,d,e,f){Zf(this,a,b,c,d,e,f,!0,!0)};
r.wb=function(a,b,c,d,e,f){Zf(this,a,b,c,d,e,f,!1,!1)};r.Kb=function(a,b,c,d,e,f){Zf(this,a,b,c,d,e,f,!0,!1)};r.bb=function(a,b,c,d,e){var f=kf(a,function(a){a=ff(nf(a,d),e);c(a);f();f=null},this)};function $f(a,b,c,d,e){var f=kf(b,function(a){for(var b=[],k=d,m,n=0;n<e.length;n++){var p=e[n];p instanceof ed&&(k=p,p=k.id,k=k.a);m&&m.getName()==k||(m=nf(a,k));p=ff(m,p);b[n]=p}c(b,!1);f();f=null},a)}r.Eb=function(a,b,c,d,e){$f(this,a,c,d,e)};r.Fb=function(a,b,c,d){$f(this,a,c,null,d)};
r.Ja=function(a,b,c,d,e,f,g,h){var k=b+" listByKeyRange "+d+" "+(e?T(e):"");I(this.b,k);var m=kf(a,function(a){a=nf(a,d);H(this.b,k+" getting records for "+d);a=hf(a,!1,null,e,f,g,h);H(this.b,k+" "+a.length+" records found.");c(a);m();m=null},this)};r.Ia=function(a,b,c,d,e,f,g,h,k,m){var n=b+" listByIndexKeyRange "+d+" "+(f?T(f):"");I(this.b,n);var p=kf(a,function(a){a=hf(nf(a,d),!1,e,f,g,h,k,m);H(this.b,n+" "+a.length+" records found.");c(a);p();p=null},this)};
r.jb=function(a,b,c,d,e){var f=b+" removeById "+d+" "+e;I(this.b,f);var g=this,h=kf(a,function(a){a=df(nf(a,d),e);H(g.b,"success "+f+(0==a?" [not found]":""));c(a);h();h=null},this)};r.Mb=function(a,b,c,d){var e=b+" removeByKeys "+d.length+" keys";I(this.b,e);var f=this,g,h=0,k=kf(a,function(a){for(var b=0;b<d.length;b++){var p=d[b].a,s=d[b].id;g&&g.getName()==p||(g=nf(a,p));h+=df(g,s)}H(f.b,"success "+e+h+" deleted");c(h);k();k=null},this)};r.zb=function(a,b,c,d,e){this.kb(a,b,c,d,e)};
r.kb=function(a,b,c,d,e){var f=b+" removeByKeyRange "+(e?R(e):"");I(this.b,f);var g=this,h=kf(a,function(a){a=ef(nf(a,d),e);H(g.b,f+" deleted "+a+" records.");c(a);h();h=null},this)};r.Lb=function(a,b,c,d,e,f){var g=b+" removeByIndexKeyRange "+(f?R(f):"");I(this.b,g);var h=this,k=kf(a,function(a){a=nf(a,d);for(var b=a.fa(e,f),p=b.length,s=0;s<p;s++)df(a,b[s]);H(h.b,g+" deleted "+p+" records.");c(p);k();k=null},this)};
r.Wa=function(a,b,c,d){var e=b+" clearByStores";I(this.b,e);var f=kf(a,function(a){for(var b=0;b<d.length;b++)nf(a,d[b]).clear();H(this.b,"success "+e);c(d.length);f();f=null},this)};r.Ya=function(a,b,c,d){var e=b+" countStores";I(this.b,e);var f=kf(a,function(a){for(var b=[],k=0;k<d.length;k++){var m=nf(a,d[k]);b.push(gf(m))}H(this.b,"success "+e);c(b);f();f=null},this)};
r.oa=function(a,b,c,d,e,f){var g=b+" count"+(null!=f?"Index":"")+(null!=e?"KeyRange":"Store");I(this.b,g);var h=kf(a,function(a){a=gf(nf(a,d),f,e);H(this.b,"success "+g);c(a);h();h=null},this)};function ag(a,b){Ef.call(this,a,b)}E(ag,Yf);ag.prototype.e=function(a,b,c,d,e,f){var g=[],h=b+" keysByIterator:"+d,k=this;I(this.b,h);var m=Df(d,a,b,this);m.f=function(a){G(k.b,"error:"+h);c(a,!0)};var n=0,p=!1;m.e=function(a){null!=a?!p&&0<f?(m.advance(f),p=!0):(n++,g.push(a),!u(e)||n<e?m.advance(1):(xf(m),I(k.b,"success:"+h),c(g))):(xf(m),I(k.b,"success:"+h),c(g))}};
ag.prototype.d=function(a,b,c,d,e,f){var g=[],h=b+" listByIterator"+d,k=this;I(this.b,h);var m=Df(d,a,b,this);m.f=function(a){H(k.b,"error:"+h);xf(m);c(a,!1)};var n=0,p=!1;m.e=function(a){if(null!=a){a=d.e?m.P():a;var b=m.ba();!p&&0<f?(m.advance(f),p=!0):(n++,g.push(d.c?a:b),!u(e)||n<e?m.advance(1):(H(k.b,"success:"+h),xf(m),c(g)))}else I(k.b,"success:"+h),xf(m),c(g)}};ag.prototype.c=function(a,b,c,d,e,f,g,h){var k=S(this.a,c);u(d)&&(d=this.R(k,d));return new Vf(a,b,0,c,d,e,f,g,h)};function bg(a,b,c,d,e,f,g,h,k){Lf.call(this,a,b,d,e,f,g,h,k);this.a=c;this.m=x(e)?Gd(c,e):null;this.e=this.f=void 0}E(bg,Lf);r=bg.prototype;r.b=J("ydn.db.core.req.WebsqlCursor");function cg(a,b){a.f=void 0;a.e=void 0;a.B=void 0;if(u(b))if(A(b)){var c=yd(b[a.a.c],a.a.type);if(a.c){var d;d=Gd(a.a,a.g).type;a.e=c;a.f=yd(b[a.g],d)}else a.f=c;a.B=a.Ga?c:dg(b,a.a)}else a.B=b}
function eg(a,b,c){Gd(a.a,a.g);var d=[],e=a.g,f=a.k,g=a.f;if(null!=f){var h=f.lower,k=f.upper,m=f.lowerOpen,f=f.upperOpen;a.l?k=null!=k&&-1==Q(k,g)?k:g:h=null!=h&&1==Q(h,g)?h:g;f=null!=h&&null!=k?O.bound(h,k,!!m,!!f):null!=h?jd.lowerBound(h,!!m):jd.upperBound(k,!!f)}else f=a.l?jd.upperBound(g):jd.lowerBound(g);e=Fd(a.a,d,a.j,e,f,a.l,a.unique);c=a.l?jd.upperBound(c,!1):jd.lowerBound(c,!1);c=Fd(a.a,d,a.j,a.a.c,c,a.l,a.unique);e.n=e.n?e.n+(" AND "+c.n):c.n;c="SELECT "+e.select+" FROM "+e.pa+(e.n?" WHERE "+
e.n:"")+(e.group?" GROUP BY "+e.group:"")+" ORDER BY "+e.V;c+=" LIMIT 1";I(a.b,a+": continuePrimary:  SQL: "+c+" : "+R(d));a.d.executeSql(c,d,function(c,d){0<d.rows.length?cg(a,d.rows.item(0)):cg(a);b.call(a,a.f,a.e,a.B);b=null},function(c,d){G(a.b,"get error: "+d.message);a.Ka(d);cg(a);b.call(a,a.e,a.f,a.B);b=null;return!1})}
function fg(a,b,c,d,e){var f=a.m.c,g=a.m.a,h=a.a.a,k=a.l?" <":" >",k=d?k+" ":k+"= ";d=nd(c,a.m.type);e=nd(e,a.a.type);var m="";a.k?(a=Fd(a.a,b,a.j,f,a.k,a.l,a.unique),a.n+=" AND ",m=g+k+"?",b.push(d)):(c=a.l?O.upperBound(c,!0):O.lowerBound(c,!0),a=Fd(a.a,b,a.j,f,c,a.l,a.unique),m=a.n,a.n="");a.n+="("+m+" OR ("+g+" = ? AND "+h+k+"?))";b.push(d);b.push(e);return"SELECT "+a.select+" FROM "+a.pa+" WHERE "+a.n+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.V}
function gg(a,b,c,d){var e,f,g,h;if(null!=a.k)if(e=a.k.lower,f=a.k.upper,g=a.k.lowerOpen,h=a.k.upperOpen,a.l)if(null!=f){var k=Q(c,f);-1==k?(f=c,h=d):0==k&&(h=d||h)}else f=c,h=d;else null!=e?(k=Q(c,e),1==k?(e=c,g=d):0==k&&(g=d||g)):(e=c,g=d);else a.l?(f=c,h=d):(e=c,g=d);c=new O(e,f,!!g,!!h);b=Fd(a.a,b,a.j,a.m?a.m.c:a.a.c,c,a.l,a.unique);b="SELECT "+b.select+" FROM "+b.pa+(b.n?" WHERE "+b.n:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.V;a.c&&(b+=", "+a.a.a+(a.l?"DESC":"ASC"));return b}
function hg(a,b,c,d,e,f){var g=!d;d=[];null!=f?c=fg(a,d,c,g,f):null!=c?c=gg(a,d,c,g):(c=Ed(a.a,d,a.j,a.c?a.m.c:a.a.c,a.k,a.l,a.unique),a.c&&(c+=", "+a.a.a+" ASC"));c+=" LIMIT 1";0<e&&(c+=" OFFSET "+e);I(a.b,a+": continue:  SQL: "+c+" : "+R(d));a.d.executeSql(c,d,function(c,d){0<d.rows.length?cg(a,d.rows.item(0)):cg(a);b.call(a,a.f,a.e,a.B);b=null},function(c,d){G(a.b,"get error: "+d.message);a.Ka(d);cg(a);b.call(a,a.e,a.f,a.B);b=null;return!1})}r.fb=function(){return!!this.d};
r.update=function(a){if(!this.fb())throw new me;var b=new K,c=this,d=this.e;a=Nd(c.a,a,d);var e="REPLACE INTO "+Hd(this.a)+" ("+a.Wb.join(", ")+") VALUES ("+a.hc.join(", ")+") ON CONFLICT FAIL";I(c.b,this+': clear "'+e+'" : '+R(a.C));this.d.executeSql(e,a.C,function(){b.s(d)},function(a,d){G(c.b,"get error: "+d.message);b.r(d);return!1});return b};
r.advance=function(a){var b=this.f,c=this.e,d=!0;null==this.f||this.c&&null==this.e||(a-=1,d=!1);hg(this,function(a,d,g){var h=null!=b&&null!=a&&0==Q(b,a);if(this.c){var k=null!=d&&null!=c&&0==Q(d,c);if(h&&k)throw new sd("current: "+b+";"+c+" next: "+a+";"+d);}else if(h)throw new sd("current: "+b+" next: "+a);this.F(a,d,g)},this.f,d,a,this.e)};r.la=function(a){null!=a?hg(this,this.F,a,!0):this.advance(1)};r.xa=function(a,b){hg(this,this.F,a,!1,0,b)};
r.clear=function(){if(!this.fb())throw new me;var a=new K,b=this,c=this.a.c,c="DELETE FROM "+Hd(this.a)+" WHERE "+c+" = ?",d=[this.e];I(b.b,this+': clear "'+c+'" : '+R(d));this.d.executeSql(c,d,function(b,c){a.s(c.rowsAffected)},function(c,d){G(b.b,"get error: "+d.message);a.r(d);return!1});return a};r.Va=function(a,b){I(this.b,this+" restarting.");this.xa(b,a)};
r.Ua=function(a){var b=Q(a,this.e);if(0==b||1==b&&this.l||-1==b&&!this.l)throw new Zd(this+" to continuePrimaryKey  from "+this.e+" to "+a+" on "+this.Q+" direction is wrong");eg(this,this.F,a)};r.toString=function(){return"WebSql"+bg.A.toString.call(this)};function ig(a,b){Ef.call(this,a,b)}E(ig,Ef);r=ig.prototype;r.b=J("ydn.db.crud.req.WebSql");function dg(a,b){var c=a._default_?ge(a._default_):{};if(null!=b.keyPath){var d=yd(a[b.keyPath],b.type);null!=d&&Md(b,c,d)}for(d=0;d<b.indexes.length;d++){var e=b.indexes[d],f=e.c;"_default_"==f||(e.e||e.multiEntry)||"DATE"!=e.type||(f=yd(a[f],e.type),u(f)&&xd(e,c,f))}return c}r.Db=function(a,b,c,d,e,f,g,h){jg(this,a,b,c,!0,d,void 0,e,f,g,h,!1)};
r.Cb=function(a,b,c,d,e,f,g,h,k,m){jg(this,a,b,c,!0,d,e,f,g,h,k,m)};
function jg(a,b,c,d,e,f,g,h,k,m,n,p){var s=[],q=S(a.a,f),y=q.c;null!=g&&g!==y&&Gd(q,g);f=[];g=Ed(q,f,e?1:2,g||y,h,k,p);z(m)&&(g+=" LIMIT "+m);z(n)&&(g+=" OFFSET "+n);var D=c+" SQL: "+g+" ;params= "+R(f);I(a.b,D);b.executeSql(g,f,function(b,c){for(var f=c.rows.length,g=0;g<f;g++){var h=c.rows.item(g);e?s[g]=yd(h[y],q.type):null!=h&&(s[g]=dg(h,q))}H(a.b,"success "+D);d(s)},function(b,c){G(a.b,"error: "+D+c.message);d(c,!0);return!1})}r.vb=function(a,b,c,d,e,f){kg(this,a,b,c,!0,!0,d,[e],[f])};
r.Jb=function(a,b,c,d,e,f){kg(this,a,b,c,!1,!0,d,[e],[f])};r.wb=function(a,b,c,d,e,f){kg(this,a,b,c,!0,!1,d,e,f)};
function kg(a,b,c,d,e,f,g,h,k){function m(b,g){if(null==h[b])throw new rd("inserting "+(u(h[b])?"null":"undefined")+"object "+(1==h.length?"":" at "+b+" of "+h.length)+' "'+T(h[b]));var N;N=u(k)?Nd(n,h[b],k[b]):Nd(n,h[b]);var ba=p+Hd(n)+" ("+N.Wb.join(", ")+") VALUES ("+N.hc.join(", ")+");",Y=c+" SQL: "+ba+" PARAMS: "+N.C+" REQ: "+b+" of "+h.length;I(a.b,Y);g.executeSql(ba,N.C,function(e,k){function ba(b,d){var e=p+Ca("ydn.db.me:"+n.getName()+":"+b.getName())+" ("+n.a+", "+b.a+") VALUES (?, ?)",f=
[nd(Y,n.type),d];I(a.b,c+" multiEntry "+e+" "+f);g.executeSql(e,f,aa(),function(b,c){G(a.b,"multiEntry index insert error: "+c.message);return!1})}q++;for(var Y=u(N.key)?N.key:k.insertId,Sb=0,Ih=n.indexes.length;Sb<Ih;Sb++){var Ke=n.index(Sb);if(Ke.multiEntry)for(var Le=oc(h[b],Ke.keyPath),Jh=(Le?Le.length:0)||0,Me=0;Me<Jh;Me++)ba(Ke,Le[Me])}f?(H(a.b,"success "+y),d(Y)):(s[b]=Y,q==h.length?(H(a.b,"success "+y),d(s)):(Sb=b+2,Sb<h.length&&m(Sb,e)))},function(c,g){q++;if(6==g.code){g.name="ConstraintError";
if(f)H(a.b,"success "+Y),d(g,!0);else if(s[b]=null,q==h.length)I(a.b,"success "+y),d(s);else{var k=b+2;k<h.length&&m(k,c)}return e&&f?!0:!1}G(a.b,"error: "+g.message+" "+y);d(g,!0);return!1})}var n=S(a.a,g),p=e?"INSERT INTO ":"INSERT OR REPLACE INTO ",s=[],q=0,y=c+" inserting "+h.length+" objects.";if(0<h.length)for(g=0;2>g&&g<h.length;g++)m(g,b);else H(a.b,"success"),d([])}r.Kb=function(a,b,c,d,e,f){kg(this,a,b,c,!1,!1,d,e,f)};
r.Ib=function(a,b,c,d,e){if(0==e.length)c([]);else{for(var f=[],g=0,h=0,k=this,m=function(m,n){var p=[];I(k.b,"put "+n.length+" objects to "+m);for(var s=Kd(S(k.a,m)),q=s?void 0:[],y=0;y<n.length;y++)p.push(d[n[y]]),s||q.push(e[n[y]].id);kg(k,a,b,function(a,b){if(b)g++,g==h&&c(a,!0);else{for(var d=0;d<n.length;d++)f[n[d]]=a[d];g++;g==h&&c(f)}},!1,!1,m,p,q)},n="",p=[],s=[],q=0;q<e.length;q++){var y=e[q].a,D=e[q].id;y!=n?(h++,0<p.length&&m(n,p),p=[q],s=[D],n=y):(p.push(q),s.push(D))}0<p.length&&m(n,
p)}};r.bb=function(a,b,c,d,e){var f=S(this.a,d),g=this;d=f.a;e=[nd(e,f.type)];d="SELECT * FROM "+Hd(f)+" WHERE "+d+" = ?";var h=b+" SQL: "+d+" PARAMS: "+e;I(this.b,h);a.executeSql(d,e,function(a,b){if(0<b.rows.length){var d=b.rows.item(0);null!=d?(d=dg(d,f),c(d)):(H(g.b,"success: "+h),c(void 0))}else H(g.b,"success no result: "+h),c(void 0)},function(a,b){G(g.b,"error: "+h+" "+b.message);c(b,!0);return!1})};
r.Eb=function(a,b,c,d,e){function f(a,d){var s=m.a,q=[nd(e[a],m.type)],y="SELECT * FROM "+Hd(m)+" WHERE "+s+" = ?";I(g.b,"SQL: "+y+" PARAMS: "+q);d.executeSql(y,q,function(d,p){k++;if(0<p.rows.length){var s=p.rows.item(0);null!=s&&(h[a]=dg(s,m))}else h[a]=void 0;k==e.length?(H(g.b,"TxNo:"+b+"success "+y),c(h)):(s=a+10,s<e.length&&f(s,d))},function(d,m){k++;G(g.b,"error: "+y+" "+m.message);if(k==e.length)H(g.b,"TxNo:"+b+"success "+y),c(h);else{var p=a+10;p<e.length&&f(p,d)}return!1})}var g=this,h=
[],k=0,m=S(this.a,d);if(0<e.length)for(d=0;10>d&&d<e.length;d++)f(d,a);else H(g.b,"success"),c([])};r.Ja=function(a,b,c,d,e,f,g,h){jg(this,a,b,c,!1,d,void 0,e,f,g,h,!1)};r.Ia=function(a,b,c,d,e,f,g,h,k,m){jg(this,a,b,c,!1,d,e,f,g,h,k,m)};
r.Fb=function(a,b,c,d){function e(a,b){var n=d[a],p=S(f.a,n.a),s=v(n.id)?n.id.join("^|"):n.id instanceof Date?+n.id:n.id,n=p.a,s=[nd(s,p.type)],q="SELECT * FROM "+Hd(p)+" WHERE "+n+" = ?";I(f.b,"SQL: "+q+" PARAMS: "+s);b.executeSql(q,s,function(b,m){h++;if(0<m.rows.length){var n=m.rows.item(0);null!=n&&(g[a]=dg(n,p))}else g[a]=void 0;h==d.length?(I(f.b,"success "+q),c(g)):(n=a+10,n<d.length&&e(n,b))},function(a,b){G(f.b,"error: "+q+" "+b.message);c(b,!0);return!1})}var f=this,g=[],h=0;if(0<d.length)for(b=
0;10>b&&b<d.length;b++)e(b,a);else I(this.b,"success"),c([])};
r.Wa=function(a,b,c,d){function e(a,b){function k(a){a="DELETE FROM  "+Ca("ydn.db.me:"+m.getName()+":"+a.getName());I(f.b,"SQL: "+a);b.executeSql(a,[])}var m=S(f.a,d[a]),n="DELETE FROM  "+Hd(m);I(f.b,"SQL: "+n+" PARAMS: []");b.executeSql(n,[],function(b){a==d.length-1?(I(f.b,"success "+n),c(d.length)):e(a+1,b)},function(a,b){G(f.b,"error: "+n+" "+b.message);c(b,!0);return!1});for(var p=0,s=m.indexes.length;p<s;p++){var q=m.index(p);q.multiEntry&&k(q)}}var f=this;0<d.length?e(0,a):(I(this.b,"success"),
c(0))};
r.Mb=function(a,b,c,d){function e(m){if(m>=d.length)I(f.b,"success "+k),c(g,h);else{var n=S(f.a,d[m].a),p=nd(d[m].id,n.type),s=" WHERE "+n.a+" = ?",q="DELETE FROM "+Hd(n)+s,y=b+" SQL: "+q+" PARAMS: "+[p];a.executeSql(q,[p],function(){g++;e(m)},function(a,b){G(f.b,"error: "+y+b.message);h=!0;e(m);return!1});m++;for(var q=function(c){c="DELETE FROM  "+Ca("ydn.db.me:"+n.getName()+":"+c.getName())+s;I(f.b,b+NaN+c);a.executeSql(c,[p])},D=0,X=n.indexes.length;D<X;D++){var N=n.index(D);N.multiEntry&&q(N)}}}
var f=this,g=0,h=!1,k=b+" removeByKeys: "+d.length+" keys";I(this.b,k);e(0)};
r.jb=function(a,b,c,d,e){function f(c){c="DELETE FROM  "+Ca("ydn.db.me:"+g.getName()+":"+c.getName())+m;I(k.b,b+NaN+c);a.executeSql(c,[h])}var g=S(this.a,d),h=nd(e,g.type),k=this,m=" WHERE "+g.a+" = ?";d="DELETE FROM "+Hd(g)+m;var n=b+" SQL: "+d+" PARAMS: "+[h];I(this.b,n);a.executeSql(d,[h],function(a,b){I(k.b,"success "+n);c(b.rowsAffected)},function(a,b){G(k.b,"error: "+n+b.message);c(b,!0);return!1});d=0;for(e=g.indexes.length;d<e;d++){var p=g.index(d);p.multiEntry&&f(p)}};
r.zb=function(a,b,c,d,e){lg(this,a,b,c,d,void 0,e)};r.kb=function(a,b,c,d,e){lg(this,a,b,c,d,void 0,e)};r.Lb=function(a,b,c,d,e,f){lg(this,a,b,c,d,e,f)};
function lg(a,b,c,d,e,f,g){function h(d){d="DELETE FROM  "+Ca("ydn.db.me:"+k.getName()+":"+d.getName())+p;I(a.b,c+NaN+d);b.executeSql(d,n)}var k=S(a.a,e);e="DELETE FROM "+Hd(k);var m=[],n=[],p="";null!=g&&(u(f)?(f=Gd(k,f),md(f.a,f.type,g,n,m)):md(k.a,k.type,g,n,m),p=" WHERE "+n.join(" AND "));e+=p;var s=c+" SQL: "+e+" PARAMS: "+m;I(a.b,s);b.executeSql(e,m,function(b,c){I(a.b,"success "+s);d(c.rowsAffected)},function(b,c){G(a.b,"error: "+s+c.message);d(c,!0);return!1});g=0;for(f=k.indexes.length;g<
f;g++)e=k.index(g),e.multiEntry&&h(e)}r.Ya=function(a,b,c,d){function e(b){var k="SELECT COUNT(*) FROM "+Ca(d[b]);I(f.b,"SQL: "+k+" PARAMS: []");a.executeSql(k,[],function(a,n){var p=n.rows.item(0);g[b]=parseInt(p["COUNT(*)"],10);b++;I(f.b,b+". success "+k);b==d.length?c(g):e(b)},function(a,b){G(f.b,"error: "+k+" "+b.message);c(b,!0);return!1})}var f=this,g=[];0==d.length?(I(this.b,"success"),c(0)):e(0);return c};
r.oa=function(a,b,c,d,e,f,g){var h=this,k=[];d=Ed(S(this.a,d),k,3,f,e,!1,g);var m=b+" SQL: "+d+" PARAMS: "+k;I(this.b,m);a.executeSql(d,k,function(a,b){var d=b.rows.item(0);I(h.b,"success "+m);c(mg(d))},function(a,b){G(h.b,"error: "+m+b.message);c(b,!0);return!1});return c};function ng(a,b){Ef.call(this,a,b)}E(ng,ig);ng.prototype.b=J("ydn.db.core.req.WebSql");ng.prototype.e=function(a,b,c,d,e,f){og(this,a,b,c,d,1,e,f)};ng.prototype.d=function(a,b,c,d,e,f){og(this,a,b,c,d,2,e,f)};
function og(a,b,c,d,e,f,g,h){var k=[],m=c+" "+(1==f?"keys":2==f?"values":3==f?"count":"")+"ByIterator "+e;0<g&&(m+=" limit "+g);H(a.b,m);var n=Df(e,b,c,a,f);n.f=function(b){H(a.b,"error:"+m);xf(n);d(b,!0)};var p=0,s=!1;n.e=function(b){if(u(b)){var c=n.P(),D=n.ba();!s&&0<h?(n.advance(h),s=!0):(p++,k.push(1==f?b:e.e&&e.c?c:D),!u(g)||p<g?n.a[0].la(void 0):(xf(n),H(a.b,"success:"+m+" "+k.length+" records"),d(k)))}else xf(n),H(a.b,"success:"+m+" "+k.length+" records"),d(k)}}
ng.prototype.c=function(a,b,c,d,e,f,g,h){var k=S(this.a,c);u(d)&&(d=this.R(k,d));return new bg(a,b,k,c,d,e,f,g,h)};function pg(a){if(a)if(ga(a.abort))a.abort();else if(ga(a.executeSql))a.executeSql("ABORT",[],aa(),ca(!0));else throw new Ud;else throw new re("No active transaction");};/*
 _try.
*/
function qg(a,b,c){this.h=a;this.c=0;this.a=[];this.ga=this.d=null;this.q=new rg(b);this.ub=c||0}r=qg.prototype;r.q=null;r.ub=0;r.b=J("ydn.db.tr.Serial");r.Tb=function(){return this.q.c};r.Xc=function(){return this.q.a&&!this.q.d?this.q.a:null};C("ydn.db.tr.Serial.prototype.getTx",qg.prototype.Xc);r=qg.prototype;r.ga=null;r.type=function(){return this.h.j()};r.$b=ca(!1);function sg(a,b,c,d,e){I(a.b,"push tx queue["+a.a.length+"]");a.a.push({ab:b,M:c,mode:d,G:e})}
r.pc=function(){H(this.b,this+": aborting");pg(this.ga)};
r.Na=function(a,b,c,d){var e=x(b)?[b]:b;if(w(e)){if(0==e.length)throw new P("number of store names must more than 0");for(var f=0;f<e.length;f++)if(!x(e[f]))throw new P("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]);}else throw new P("store names must be an array");var g=u(c)?c:L,h=this;if(this.q.a||(!this.h.a||!this.h.a.Ta())&&0<(null!==this.d))sg(this,a,b,g,d);else{var k=tg(this.q);this.d=d?[d]:[];if(this.ub&&this.Tb()>=this.ub)throw new rd("Exceed maximum number of transactions of "+
this.ub);this.h.transaction(function(c){var d=h.q;d.a=c;d.d=!1;d.M=b;d.mode=g;d.c++;d.G=null;k=tg(h.q);Xb(h.b,k+" BEGIN "+R(b)+" "+g);a(h);for(a=null;h.$b();)c=h.a.shift(),c.G&&h.d.push(c.G),Xb(h.b,"pop tx queue"+(h.a.length+1)+" reusing T"+h.Tb()),c.ab()},e,g,function(a,b){"complete"==a?Xb(h.b,k+" COMMITTED"):Xb(h.b,k+" COMMITTED with "+a);try{for(var c;c=h.d.shift();)c(a,b)}catch(d){throw d;}finally{c=h.q,c.a?(c.a=null,c.M=null,c.mode=null,ga(c.G)&&c.G(a,b),c.G=null):G(c.b,c+" has no TX to be unlocked for "+
a),(c=h.a.shift())&&h.Na(c.ab,c.M,c.mode,c.G)}h.c=0})}};r.Ub=ca(!1);
r.i=function(a,b,c,d,e){d=d||L;var f=this,g;if(f.q.a&&!f.q.d&&this.Ub(c,d)){var h=f.q.a;f.c++;g=tg(f.q)+"R"+f.c;H(f.b,g+" BEGIN");b(h,g,function(b,c){f.ga=h;c?(H(f.b,g+" ERROR"),a.r(b)):(H(f.b,g+" SUCCESS"),a.s(b));f.ga=null});H(f.b,g+" END");b=null}else f.Na(function(){var c=f.q.a;f.c++;g=tg(f.q)+"R"+f.c;H(f.b,g+" BEGIN");b(c,g,function(b,d){f.ga=c;d?(H(f.b,g+" ERROR"),a.r(b)):(H(f.b,g+" SUCCESS"),a.s(b));f.ga=null});H(f.b,g+" END");b=null},c,d,e)};r.getName=function(){return this.h.getName()};
r.toString=function(){return"Serial:"+tg(this.q)+(this.ga?"*":"")};function ug(a,b){qg.call(this,a,b)}E(ug,qg);ug.prototype.b=J("ydn.db.tr.AtomicSerial");ug.prototype.i=function(a,b,c,d,e){var f,g,h=new K;h.K(function(a){g=!1;f=a},function(a){g=!0;f=a});ug.A.i.call(this,h,b,c,d,function(b,c){if(!0===g)a.r(f);else if(!1===g)a.s(f);else{var d=new le;a.r(d)}e&&(e(b,c),e=void 0)})};function vg(a,b,c){this.h=a;this.c=b;this.a=c;this.d=null}vg.prototype.b=J("ydn.db.tr.DbOperator");vg.prototype.e=function(){this.a.pc()};function Z(a){a.d||(a.d=a.h.Gb());return a.d}vg.prototype.toString=function(){return"TxStorage:"+this.h.getName()};function wg(a,b,c){vg.call(this,a,b,c)}E(wg,vg);r=wg.prototype;r.b=J("ydn.db.crud.DbOperator");
r.count=function(a,b,c,d){var e=jc(),f=this,g,h,k;if(u(a))if(v(a)){if(u(c)||u(b))throw new P("too many arguments.");g=a;for(b=0;b<g.length;b++)if(!Rd(this.c,g[b]))throw new P('store name "'+g[b]+'" at '+b+" not found.");H(this.b,"countStores: "+R(g));this.a.i(e,function(a,b,c){Z(f).Ya(a,b,c,g)},g,L)}else if(x(a)){if(!Rd(this.c,a))throw new P('store name "'+a+'" not found.');if(u(d)&&!fa(d))throw new TypeError('unique value "'+d+'" must be boolean, but found '+typeof d+".");g=[a];if(x(b))if(h=b,A(c)){if(b=
kd(c))throw new P("invalid key range: "+T(c)+" "+b);k=id(c)}else{if(null!=c)throw new P("invalid key range: "+T(c)+" of type "+typeof c);k=null}else if(A(b)||!u(b))if(A(b)){if(c=kd(b))throw new P("invalid key range: "+T(b)+" "+c);k=id(b)}else{if(null!=b)throw new P("key range must be  an object but found "+T(b)+" of type "+typeof b);k=null}else throw new P("key range must be an object, but "+T(c)+" of type "+typeof b+" found.");H(this.b,"countKeyRange: "+g[0]+" "+(h?h:"")+R(k));this.a.i(e,function(a,
b,c){Z(f).oa(a,b,c,g[0],k,h,!!d)},g,L)}else throw new P("Invalid store name or store names.");else{if(u(c)||u(b))throw new P("too many arguments.");g=Qd(this.c);var m=new K;H(this.b,"countStores: "+R(g));this.a.i(e,function(a,b,c){Z(f).Ya(a,b,c,g)},g,L);e.K(function(a){a=Ka(a,function(a,b){return b+a});m.s(a)},function(a){m.r(a)});return m}return e};
r.ya=function(a,b){var c=this,d=jc();if(a instanceof ed){var e=a.a;if(!Rd(this.c,e)){if(this.c.J())return hc(void 0);throw new P("Store: "+e+" not found.");}var f=a.id;H(this.b,"getById: "+e+":"+f);this.a.i(d,function(a,b,d){Z(c).bb(a,b,d,e,f)},[e],L)}else if(x(a)&&u(b)){if(!S(this.c,a)){if(this.c.J())return hc(void 0);throw new P('Store name "'+a+'" not found.');}if(b instanceof jd||b instanceof O){var g=new K;g.K(function(a){d.s(a[0])},function(a){d.r(a)});var h=kd(b);if(h)throw new P("invalid key range: "+
b+" "+h);var k=id(b);H(this.b,"getById: "+a+":"+R(k));this.a.i(g,function(b,d,e){Z(c).Ja(b,d,e,a,k,!1,1,0)},[a],L)}else H(this.b,"getById: "+a+":"+b),this.a.i(d,function(d,e,f){Z(c).bb(d,e,f,a,b)},[a],L)}else throw new P("get require valid input arguments.");return d};
r.keys=function(a,b,c,d,e,f){var g=this,h,k,m=null,n=!1,p=S(this.c,a);if(!x(a))throw new P("store name must be a string, but "+a+" of type "+typeof a+" is not.");if(!this.c.J()){if(!p)throw new P('store name "'+a+'" not found.');if(x(b)&&!Gd(p,b))throw new P('index "'+b+'" not found in store "'+a+'".');}if(this.c.J()&&!p)return hc([]);p=new K;if(x(b)){var s=kd(c);if(s)throw new P("invalid key range: "+c+" "+s);m=id(c);if(z(d))h=d;else{if(u(d))throw new P("limit must be a number");h=100}if(z(e))k=
e;else{if(u(e))throw new P("offset must be a number");k=0}if(u(f))if(fa)n=f;else throw new P("reverse must be a boolean");H(this.b,"keysByIndexKeyRange: "+a);this.a.i(p,function(c,d,e){Z(g).Cb(c,d,e,a,b,m,n,h,k,!1)},[a],L)}else{if(A(b)){if(s=kd(b))throw new P("invalid key range: "+T(b)+" "+s);m=id(b)}else{if(null!=b)throw new TypeError("invalid key range: "+T(b)+" of type "+typeof b);m=null}if(z(c))h=c;else{if(u(c))throw new P("limit must be a number");h=100}if(z(d))k=d;else{if(u(d))throw new P("offset must be a number");
k=0}if(u(e))if(fa(e))n=e;else throw new P("reverse must be a boolean");H(this.b,"keysByKeyRange: "+a);this.a.i(p,function(b,c,d){Z(g).Db(b,c,d,a,m,n,h,k)},[a],L)}return p};
r.C=function(a,b,c,d,e,f){var g=this,h=jc(),k,m,n=!1;if(x(a)){if(!S(this.c,a)){if(this.c.J())return hc([]);throw new se(a);}if(v(b)){if(u(c)||u(d))throw new P("too many input arguments");H(this.b,"listByIds: "+a+" "+b.length+" ids");this.a.i(h,function(c,d,e){Z(g).Eb(c,d,e,a,b)},[a],L)}else if(x(b)){var p=kd(c);if(p)throw new P("invalid key range: "+c+" "+p);var s=id(c);if(u(d))if(z(d))k=d;else throw new P("limit must be a number.");else k=100;if(u(e))if(z(e))m=e;else throw new P("offset must be a number.");
else m=0;if(fa(f))n=f;else if(u(f))throw new P("reverse must be a boolean, but "+f);H(this.b,"listByIndexKeyRange: "+a+":"+b);this.a.i(h,function(c,d,e){Z(g).Ia(c,d,e,a,b,s,n,k,m,!1)},[a],L)}else{s=null;if(A(b)){if(p=kd(b))throw new P("invalid key range: "+b+" "+p);s=id(b)}else if(null!=b)throw new TypeError('expect key range object, but found "'+T(b)+'" of type '+typeof b);if(u(c))if(z(c))k=c;else throw new P("limit must be a number, but "+c+" is "+typeof c);else k=100;if(u(d))if(z(d))m=d;else throw new P("offset must be a number, but "+
d+" is "+typeof d);else m=0;if(u(e))if(fa(e))n=e;else throw new P("reverse must be a boolean, but "+e+" is "+typeof e);H(this.b,(s?"listByKeyRange: ":"listByStore: ")+a);this.a.i(h,function(b,c,d){Z(g).Ja(b,c,d,a,s,n,k,m)},[a],L)}}else if(v(a))if(a[0]instanceof ed){c=[];for(d=0;d<a.length;d++){e=a[d].a;if(!Rd(this.c,e)){if(this.c.J())return h=[],h[a.length-1]=void 0,hc(h);throw new P("Store: "+e+" not found.");}0<=Ga(c,e)||c.push(e)}H(this.b,"listByKeys: "+R(c)+" "+a.length+" keys");this.a.i(h,function(b,
c,d){Z(g).Fb(b,c,d,a)},c,L)}else throw new P("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+" found.");else throw new P("first argument "+a+" is invalid.");return h};
r.rb=function(a,b,c){var d=x(a)?a:A(a)?a.name:void 0;if(!x(d))throw new P("store name "+d+" must be a string, but "+typeof d);var e=S(this.c,d);if(!e){if(!this.c.J())throw new P('store name "'+d+'" not found.');e=Dd(A(a)?a:{name:d});H(this.b,"Adding object store: "+d);xg(this.h,e)}else if(this.c.J()&&A(a)&&(a=Dd(a),a=Od(e,a)))throw new Ud(a);a=jc();var f=this;if(!e)throw new P('store name "'+d+'" not found.');if(x(e.keyPath)&&u(c))throw new P("key must not be provided while the store uses in-line key.");
if(!e.keyPath&&!e.autoIncrement&&!u(c))throw new P("out-of-line key must be provided.");if(v(b))H(this.b,"addObjects: "+d+" "+b.length+" objects"),this.a.i(a,function(a,e,g){Z(f).wb(a,e,g,d,b,c)},[d],M),e.ea&&a.Y(function(a){bd(f.h,new yg(zg,f.h,e.getName(),a,b))});else if(A(b)){var g="store: "+d+" key: "+Ld(e,b,c);H(this.b,"addObject: "+g);this.a.i(a,function(a,e,g){Z(f).vb(a,e,g,d,b,c)},[d],M);e.ea&&a.Y(function(a){bd(f.h,new Ag(zg,f.h,e.getName(),a,b))})}else throw new P("record must be an object or array list of objects, but "+
b+" of type "+typeof b+" found.");return a};function Bg(a,b){var c=x(b)?b:A(b)?b.name:void 0;if(!x(c))throw new P("store name must be a string");var d=S(a.c,c);if(!d){if(!a.c.J())throw new se(c);d=Dd(A(b)?b:{name:c});H(a.b,"Adding object store: "+c);xg(a.h,d)}else if(a.c.J()&&A(b)){var e=Dd(b);if(e=Od(d,e))throw new Ud(e);}if(!d)throw new se(c);return d}
r.za=function(a,b,c){var d=jc(),e=this;if(a instanceof ed){var d=a.a,f=S(this.c,d);if(!f)throw new P('store "'+d+'" not found.');if(f.keyPath){var g=Ld(f,b);if(null!=g){if(0!=Q(g,a.id))throw new P("Inline key must be "+a+" but "+g+" found.");}else Md(f,b,a.id);return this.za(d,b)}return this.za(d,b,a.id)}if(v(a)){if(u(c))throw new P("too many arguments");if(!u(b))throw new P("record values required");for(var f=[],g=0,h=a.length;g<h;g++){var k=a[g].a;-1==Ga(f,k)&&f.push(k);var m=S(this.c,k);if(!m)throw new P('store "'+
k+'" not found.');m.keyPath&&Md(m,b[g],a[g].id)}H(this.b,"putByKeys: to "+R(f)+" "+b.length+" objects");this.a.i(d,function(c,d,f){Z(e).Ib(c,d,f,b,a)},f,M)}else if(x(a)||A(a)){var m=Bg(this,a),n=m.getName();if(m.keyPath&&u(c))throw new P("key must not be provided while the store uses in-line key.");if(!m.keyPath&&!m.autoIncrement&&!u(c))throw new P("out-of-line key must be provided.");if(v(b))H(this.b,"putObjects: "+n+" "+b.length+" objects"),this.a.i(d,function(a,d,f){Z(e).Kb(a,d,f,n,b,c)},[n],M),
m.ea&&d.Y(function(a){bd(e.h,new yg(Cg,e.h,n,a,b))});else if(A(b))H(this.b,"putObject: "+n+" "+c),this.a.i(d,function(a,d,f){Z(e).Jb(a,d,f,n,b,c)},[n],M),m.ea&&d.Y(function(a){bd(e.h,new Ag(Cg,e.h,n,a,b))});else throw new P("put record value must be Object or array of Objects");}else throw new P("the first argument of put must be store name, store schema or array of keys.");return d};
r.clear=function(a,b,c){if(u(c))throw new P("too many input arguments");c=jc();var d=this;if(x(a)){if(!S(this.c,a))throw new P('store name "'+a+'" not found.');if(A(b)){var e=id(b);if(null===e)throw new P("clear method requires a valid non-null KeyRange object.");H(this.b,"clearByKeyRange: "+a+":"+R(e));this.a.i(c,function(b,c,f){Z(d).zb(b,c,f,a,e)},[a],M)}else{if(u(b))throw new P("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+typeof b);H(this.b,"clearByStore: "+
a);this.a.i(c,function(b,c,e){Z(d).Wa(b,c,e,[a])},[a],M)}}else if(!u(a)||v(a)&&x(a[0])){var f=a||Qd(this.c);H(this.b,"clearByStores: "+R(f));this.a.i(c,function(a,b,c){Z(d).Wa(a,b,c,f)},f,M)}else throw new P('first argument "'+a+'" is invalid.');return c};
r.sb=function(a,b,c){var d=jc(),e=this;if(x(a)){var f=S(this.c,a);if(!f)throw new P('store name "'+a+'" not found.');if(u(c))if(x(b)){var g=Gd(f,b);if(!g)throw new P("index: "+b+" not found in "+a);if(A(c)||null===c){var h=id(c);H(this.b,"removeByIndexKeyRange: "+a+":"+g.getName()+" "+a);this.a.i(d,function(b,c,d){Z(e).Lb(b,c,d,a,g.getName(),h)},[a],M)}else throw new P("key range "+c+' is invalid type "'+typeof c+'".');}else throw new P('index name "'+b+'" must be a string, but '+typeof b+" found.");
else if(x(b)||z(b)||w(b)||b instanceof Date)H(this.b,"removeById: "+a+":"+b),this.a.i(d,function(c,d,f){Z(e).jb(c,d,f,a,b)},[a],M),f.ea&&d.Y(function(b){bd(e.h,new Ag(Dg,e.h,a,b,void 0))});else if(A(b))h=id(b),H(this.b,"removeByKeyRange: "+a+":"+R(h)),this.a.i(d,function(b,c,d){Z(e).kb(b,c,d,a,h)},[a],M),f.ea&&d.Y(function(b){bd(e.h,new yg(Dg,e.h,a,b,void 0))});else throw new P('Invalid key or key range "'+b+'" of type '+typeof b);}else if(a instanceof ed)this.a.i(d,function(b,c,d){Z(e).jb(b,c,d,
a.a,a.id)},[a.a],M);else if(v(a)){c=[];for(var f=0,k=a.length;f<k;f++){if(!(a[f]instanceof ed))throw new P("key list element at "+f+" of "+k+' must be yn.db.Key, but "'+T(a[f])+'" ('+ea(a[f])+") is not ydn.db.Key.");var m=a[f].a;-1==Ga(c,m)&&c.push(m)}if(1>c.length)throw new P('at least one valid key required in key list "'+T(a)+'"');this.a.i(d,function(b,c,d){Z(e).Mb(b,c,d,a)},c,M)}else throw new P('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+T(a)+'" ('+
ea(a)+") found.");return d};r.toString=function(){return"DbOperator:"+this.h.getName()};function Eg(a,b,c){vg.call(this,a,b,c)}E(Eg,wg);r=Eg.prototype;r.b=J("ydn.db.core.DbOperator");r.ya=function(a,b){var c=this;if(a instanceof V){var d=jc(),e=a.I,f=S(this.c,e);if(!f)throw new P('store "'+e+'" not found.');var g=a.R();if(u(g)&&!Jd(f,g))throw new P('index "'+g+'" not found in store "'+e+'".');f=new K;f.K(function(a){d.s(a[0])},function(a){d.r(a)});H(this.b,"getByIterator:"+a);this.a.i(f,function(b,d,e){Z(c).d(b,d,e,a,1)},[e],L);return d}return Eg.A.ya.call(this,a,b)};
r.keys=function(a,b,c,d,e){var f=this;if(a instanceof V){d=jc();var g=100;if(z(b)){if(g=b,1>g)throw new P("limit must be a positive value, but "+b);}else if(u(b))throw new P("limit must be a number,  but "+b);if(u(c))throw new P("offset must not be specified");H(this.b,"keysByIterator:"+a);this.a.i(d,function(b,c,d){Z(f).e(b,c,d,a,g)},a.stores(),L);return d}return Eg.A.keys.call(this,a,b,c,d,e)};
r.count=function(a,b,c){var d=this;if(a instanceof V){if(u(b)||u(c))throw new P("too many arguments.");b=jc();H(this.b,"countKeyRange:"+a);this.a.i(b,function(b,c,g){Z(d).oa(b,c,g,a.I,a.yc(),a.R(),a.Pa())},a.stores(),L);return b}return Eg.A.count.call(this,a,b,c)};
r.C=function(a,b,c,d,e,f){var g=this;if(a instanceof V){d=jc();var h;if(z(b)){if(h=b,1>h)throw new P("limit must be a positive value, but "+h);}else if(u(b))throw new P("limit must be a number, but "+b);if(u(c))throw new P("offset must not be specified");H(this.b,"listByIterator:"+a);this.a.i(d,function(b,c,d){Z(g).d(b,c,d,a,h)},a.stores(),L);return d}return Eg.A.C.call(this,a,b,c,d,e,f)};
r.lc=function(a,b){var c=jc();if(u(b)){if(!v(b))throw new TypeError("Iterator argument must be an array.");for(var d=0;d<b.length;d++)if(!(b[d]instanceof V))throw new TypeError("Iterator at "+d+" must be cursor range iterator.");}var e;e=b?b:null;for(var f=[],d=0;d<e.length;d++)for(var g=e[d].stores(),h=0;h<g.length;h++)0<=Ga(f,g[h])||f.push(g[h]);I(this.b,this+": scan for "+e.length+" iterators on "+f);var k=this;this.a.i(c,function(b,c,d){function f(){for(var a=0,d=0;d<e.length;d++){var p=Df(e[d],
b,c,Z(k));p.f=g;p.e=na(h,a);ja[d]=p;ba[a]=d;a++}N=e.length}function g(a){for(var b=0;b<ja.length;b++)xf(ja[b]);Oa(ja);H(k.b,D+" error");d(a,!0)}function h(b,c){if(X)throw new Wd;zb++;var f=zb===N,g=ba[b],m=e[g],n=ja[g],g=n.P(),n=n.ba();Y[b]=c;Ja[b]=m.e?m.c?g:n:m.c?c:n;if(f){var s;s=a instanceof Mf?a.d(Y,Ja):a(Y,Ja);f=[];m=[];g=[];n=[];if(v(s))for(var q=0;q<s.length;q++)!0===s[q]?g[q]=1:!1===s[q]?n[q]=!0:m[q]=s[q];else if(null===s)f=[];else if(u(s))if(A(s)){f=["advance","continue","continuePrimary",
"restart"];for(q in s)if(!(0<=Ga(f,q)))throw new rd('Unknown attribute "'+q+'" in cursor advancement object');f=s.continuePrimary||[];m=s["continue"]||[];g=s.advance||[];n=s.restart||[]}else throw new Yd("scan callback output");else for(f=[],q=0;q<e.length;q++)u(ba[q])&&(g[q]=1);for(q=zb=s=0;q<e.length;q++)null!=f[q]||(u(m[q])||null!=n[q]||null!=g[q])||zb++;for(q=0;q<e.length;q++)if(null!=f[q]||u(m[q])||null!=n[q]||null!=g[q]){var y=ba[q];if(!u(y))throw new Yd(q+" is not an iterator.");var y=e[y],
Bb=ja[q];if(null==Y[q]){var Je=q+"/"+e.length;if(null!=g[q])throw new Zd(Bb+" "+Je+" must not advance "+g[q]+" steps");if(u(m[q]))throw new Zd(Bb+" "+Je+" must not continue to key "+m[q]);if(null!=f[q])throw new Zd(Bb+" "+Je+" must not continue to primary key "+f[q]);}Y[q]=void 0;Ja[q]=void 0;if(null!=n[q])y=Bb,y.L=!1,y.a[0].Va(void 0,void 0);else if(u(m[q]))Bb.a[0].la(m[q]);else if(null!=f[q])Bb.a[0].Ua(f[q]);else if(null!=g[q])Bb.advance(1);else throw new Wd(y+": has no action");s++}if(0==s){for(f=
0;f<ja.length;f++)xf(ja[f]);X=!0;Oa(ja);H(k.b,"success "+D);d(void 0)}}}var D=c+" "+k+" scanning";I(k.b,D);var X=!1,N,ba=[],Y=[],Ja=[],ja=[],zb=0;a instanceof Mf?a.c(e,function(){f()})||f():f()},f,L);return c};
r.kc=function(a,b,c){if(!(b instanceof V))throw new P("Second argument must be cursor range iterator.");if(!S(this.c,b.I))throw new P('Store "'+b.I+'" not found.');c=c||L;var d=this,e=jc();H(this.b,"open:"+c+" "+b);this.a.i(e,function(c,e,h){I(d.b,e+" iterating "+b);var k=Df(b,c,e,Z(d));k.f=function(a){h(a,!0)};k.e=function(b){if(null!=b){var c=a(k);!0===c?(k.L=!1,k.a[0].Va(void 0,void 0)):A(c)?!0===c.restart?(b=c["continue"],c=c.continuePrimary,k.L=!1,k.a[0].Va(c,b)):null!=c["continue"]?k.a[0].la(c["continue"]):
null!=c.continuePrimary?k.a[0].Ua(c.continuePrimary):(xf(k),h(void 0)):k.advance(1)}else xf(k),h(void 0)}},b.stores(),c);return e};r.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)if(!e)throw new P('Store "'+e+'" not found.');e=jc();I(this.b,"map:"+a);this.a.i(e,function(d,e,f){I(c.b,e+" iterating "+a);var m=Df(a,d,e,Z(c));m.f=function(a){f(a,!1)};m.e=function(c){null!=c?(b(a.e?a.c?c:m.P():a.c?c:m.ba()),m.advance(1)):(f(void 0),b=null)}},d,L);return e};
r.pb=function(a,b,c){for(var d=this,e=a.stores(),f,g=0;f=e[g];g++)if(!f)throw new P('Store "'+f+'" not found.');f=jc();var h=A(c)?ge(R(c)):c;H(this.b,"reduce:"+a);this.a.i(f,function(c,e,f){var g=Df(a,c,e,Z(d));g.f=function(a){f(a,!0)};var s=0;g.e=function(c){null!=c?(h=b(h,a.e?a.c?c:g.P():a.c?c:g.ba(),s++),g.advance(1)):f(h)}},e,L);return f};var zg="created",Dg="deleted",Cg="updated";function Fg(a,b){Ec.call(this,a,b)}E(Fg,Ec);Fg.prototype.f=l("d");function Gg(a,b,c,d,e){Ec.call(this,a,b);this.version=c;this.mc=d;this.error=e}E(Gg,Fg);r=Gg.prototype;r.name="StorageEvent";r.version=NaN;r.mc=NaN;r.error=null;r.Wc=l("version");r.wc=l("mc");r.Vc=l("error");function Ag(a,b,c,d,e){Ec.call(this,a,b);this.d=c;this.key=d;this.value=e}E(Ag,Fg);Ag.prototype.name="RecordEvent";Ag.prototype.g=l("key");Ag.prototype.j=l("value");
function yg(a,b,c,d,e){Ec.call(this,a,b);this.d=c;this.keys=d;this.C=e}E(yg,Fg);yg.prototype.name="StoreEvent";yg.prototype.fa=l("keys");yg.prototype.cb=l("C");function ye(a,b){Pd.call(this,a,b)}E(ye,Pd);ye.prototype.J=ca(!0);function ke(a,b){a.stores.push(b)};function Bd(a,b){var c;c=c||{};if(null!=a&&null!=b){if(v(a)&&v(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==Ma(b,function(b){return Bd(b,a[d])}))return!1;return!0}if(v(a))return 1==a.length&&Bd(a[0],b);if(v(b))return 1==b.length&&Bd(b[0],a);if(A(a)&&A(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=Bd(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=Bd(a[e],b[e]),!f))return!1;return!0}return a===b}return!1}
function mg(a){for(var b in a)if(a.hasOwnProperty(b))return a[b]};function Hg(){};function Ig(){}E(Ig,Hg);Ig.prototype.Da=function(){var a=0;ab(this.ma(!0),function(){a++});return a};Ig.prototype.clear=function(){var a=bb(this.ma(!0)),b=this;Ha(a,function(a){b.w.removeAttribute(Jg(a));Kg(b)})};function Lg(a,b){if(F&&!(F&&9<=Ab)){Mg||(Mg=new cb);var c=Mg;this.w=Object.prototype.hasOwnProperty.call(c.c,a)?c.c[a]:void 0;this.w||(b?this.w=document.getElementById(b):(this.w=document.createElement("userdata"),this.w.addBehavior("#default#userData"),document.body.appendChild(this.w)),db(Mg,a,this.w));this.Nb=a;try{this.w.load(this.Nb)}catch(d){this.w=null}}}E(Lg,Ig);var Ng={".":".2E","!":".21","~":".7E","*":".2A","'":".27","(":".28",")":".29","%":"."},Mg=null;r=Lg.prototype;r.w=null;r.Nb=null;
function Jg(a){return"_"+encodeURIComponent(a).replace(/[.!~*'()%]/g,function(a){return Ng[a]})}r.Da=function(){return Og(this).attributes.length};r.ma=function(a){var b=0,c=Og(this).attributes,d=new Za;d.a=function(){if(b>=c.length)throw Ya;var d=c[b++];if(a)return decodeURIComponent(d.nodeName.replace(/\./g,"%")).substr(1);d=d.nodeValue;if(!x(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};
r.clear=function(){for(var a=Og(this),b=a.attributes.length;0<b;b--)a.removeAttribute(a.attributes[b-1].nodeName);Kg(this)};function Kg(a){try{a.w.save(a.Nb)}catch(b){throw"Storage mechanism: Quota exceeded";}}function Og(a){return a.w.XMLDocument.documentElement};function Pg(){mf.call(this,this)}E(Pg,mf);Pg.prototype.Xa=function(a){return new Qg(a)};Pg.prototype.ka=ca("userdata");function Qg(a){this.h=new Lg(a);this.length=this.keys().length}r=Qg.prototype;r.length=0;r.clear=function(){this.h.clear();this.a=[]};r.keys=function(){this.a||(this.a=[],ab(this.h,function(a){this.a.push(a)},this));return this.a};r.key=function(a){return this.keys()[a]};r.setItem=function(a,b){this.a&&this.a.push(a);var c=this.h;c.w.setAttribute(Jg(a),b);Kg(c)};
r.getItem=function(a){a=this.h.w.getAttribute(Jg(a));if(!x(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return u(a)?a:null};r.removeItem=function(a){this.a=null;var b=this.h;b.w.removeAttribute(Jg(a));Kg(b)};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function W(a,b,c){ad.call(this);c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial".split(" "),e;for(e in c)if(c.hasOwnProperty(e)&&-1==Ga(d,e))throw new P('Unknown attribute "'+e+'" in options.');if(c.mechanisms){if(!v(c.mechanisms))throw new P("mechanisms attribute must be an array but "+ea(c.mechanisms)+" found.");for(e=0;e<c.mechanisms.length;e++)if(!(0<=Ga(Rg,c.mechanisms[e])))throw new P('Invalid mechanism "'+c.mechanisms[e]+'"');}this.Ac=c.mechanisms||Rg;this.dc=c.size;
this.Bc=u(c.connectionTimeout)?c.connectionTimeout:3E4;this.ic=u(c.ic)?c.ic:!1;this.a=null;this.g=[];this.gb=!1;if(b instanceof Pd)c=b;else if(A(b))for(c=c.autoSchema||!u(b.stores)?new ye(b):new Pd(b),d=d=b.stores?b.stores.length:0,e=0;e<d;e++){var f=S(c,b.stores[e].name);b.stores[e].Sync&&G(this.b,"Synchronization option for "+f.getName()+" ignored.")}else c=new ye;this.c=c;u(a)&&this.B(a)}E(W,ad);W.prototype.b=J("ydn.db.con.Storage");
W.prototype.Cc=function(a){if(u(a)){var b=function(b){a(b.toJSON())};if(this.a)this.a.N(b);else{var c=this;this.transaction(function(a){c.a.N(b,a)},null,L)}}return this.c?this.c.toJSON():null};function xg(a,b){var c=b instanceof Cd?b:Dd(b),d=b.name,e=S(a.c,d);if(0==Od(c,e).length)hc(!1);else if(e=e?"update":"add",a.c instanceof ye)ke(a.c,c),a.a?(a.a.nb(),a.a=null,Sg(a)):hc(!1);else throw new Xd("Cannot "+e+" store: "+d+". Not auto schema generation mode.");}
W.prototype.B=function(a){if(this.a)throw Error("Already defined with "+this.e);this.e=a;Sg(this)};C("ydn.db.con.Storage.prototype.setName",W.prototype.B);W.prototype.getName=l("e");var Rg="indexeddb websql localstorage sessionstorage userdata memory".split(" ");function Tg(a,b){return"indexeddb"==b?new he(a.dc,a.Bc):"websql"==b?new we(a.dc):"localstorage"==b?new of:"sessionstorage"==b?new qf:"memory"==b?new mf:"userdata"==b?new Pg:null}
function Sg(a){function b(b,d){b?(I(a.b,a+": ready."),a.Sc=NaN,dd(function(){a.onReady(d);Ug(a)}),c.s(d)):(G(a.b,a+": database connection fail "+d.name),dd(function(){a.onReady(d);if(a.g){a.b.log(Nb,"Purging "+a.g.length+" transactions request.",void 0);for(var b;b=a.g.shift();)b.G&&b.G("error",d)}}),c.r(d))}for(var c=new K,d=null,e=a.Ac,f=0;f<e.length;f++){var g=e[f].toLowerCase();if("indexeddb"==g&&je){d=Tg(a,g);break}else if("websql"==g&&ga(t.openDatabase)){d=Tg(a,g);break}else if("localstorage"==
g&&window.localStorage){d=Tg(a,g);break}else if("sessionstorage"==g&&window.sessionStorage){d=Tg(a,g);break}else if("memory"==g){d=Tg(a,g);break}else if("userdata"==g){d=Tg(a,g);break}}null===d?(e=new Xd("No storage mechanism found."),b(!1,new Gg("ready",a,NaN,NaN,e))):d.wa(a.e,a.c).K(function(a){this.a=d;b(!0,new Gg("ready",this,parseFloat(d.ob()),parseFloat(a),null));d.e=function(){I(this.b,this+": disconnected.")}},function(a){G(this.b,this+": opening fail: "+a.message);var c=new Gg("ready",this,
NaN,NaN,a);c.message=a.message;b(!1,c)},a)}W.prototype.j=function(){if(this.a)return this.a.ka()};C("ydn.db.con.Storage.prototype.getType",W.prototype.j);W.prototype.onReady=function(a){bd(this,a)};W.prototype.ib=function(){this.a&&(this.a.nb(),this.a=null,I(this.b,this+" closed"))};C("ydn.db.con.Storage.prototype.close",W.prototype.ib);r=W.prototype;r.Rc=function(){return this.a?this.a.Qb():null};r.Sc=NaN;
function Ug(a){var b=a.g.shift();b&&(I(a.b,"pop tx queue["+(a.g.length+1)+"]"),a.transaction(b.ab,b.Fc,b.mode,b.G));oa()}function Vg(a,b,c,d,e){I(a.b,"push tx queue["+a.g.length+"]");a.g.push({ab:b,Fc:c,mode:d,G:e});100<a.g.length&&0==a.g.length%100&&G(a.b,"Transaction queue stack size is "+a.g.length+". It is too large, possibility due to incorrect usage.")}r.gb=!1;
r.transaction=function(a,b,c,d){var e=b;if(x(b))e=[b];else if(null!=b)if(w(b)){if(0==b.length)throw new P("number of store names must more than 0");for(var f=0;f<b.length;f++)if(!x(b[f]))throw new P("store name at "+f+" must be string but found "+typeof b[f]);}else throw new P("store names must be an array");else e=null;if(this.a&&this.a.Ta()&&!this.gb){var g=this,h=u(c)?c:L;h==mc&&(this.gb=!0);this.a.$a(function(b){a(b);a=null},e,h,function(a,b){ga(d)&&(d(a,b),d=void 0);h==mc&&(g.gb=!1);Ug(g)})}else Vg(this,
a,e,c,d)};r.Bb=function(a,b,c,d){function e(a){if(!(0<=Ga(f,a)))throw new P('Invalid event type "'+a+'"');}var f=["created","ready","deleted","updated"];if(w(a))for(var g=0;g<a.length;g++)e(a[g]);else e(a);W.A.Bb.call(this,a,b,c,d)};r.toString=function(){return"Storage:"+this.a};function Wg(a,b,c,d){this.d=a;this.f=b;this.a=Qa(c);this.c=d;this.e=[]}Wg.prototype.d=null;function Xg(a,b,c){if(a.d)c&&a.e.push(c),b(a.d);else throw new sd("tx committed on ParallelTxExecutor");}Wg.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.f+" mode:"+this.c+" scopes:"+R(this.a)};function Yg(a,b,c,d,e,f){this.h=a;this.f=b;this.c=this.Aa=0;this.La=this.$=null;this.e=d;this.d=e;this.a=c||"single";this.tb=f||0}r=Yg.prototype;r.Aa=0;r.tb=0;r.$=null;r.La=null;r.b=J("ydn.db.tr.Parallel");r.Tb=l("Aa");r.type=function(){return this.h.j()};r.pc=function(){H(this.b,this+": aborting");pg(this.La)};
r.qc=function(a,b){var c;if("multi"==this.a)a:if(c=this.$,!c.a||!c.c||b!=c.c&&(c.c!=M||b!=L)||a.length>c.a.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.a)a:if(c=this.$,c.a&&c.c&&b==c.c&&c.a.length==a.length){for(d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.a?!0:!1;return c};
r.Na=function(a,b,c,d){function e(c){k.Aa++;m=new Wg(c,k.Aa,b,h);g=Zg(k);Xb(k.b,g+" BEGIN "+R(b)+" "+h);k.$=m;Xg(k.$,a,d)}function f(a,b){"complete"==a?Xb(k.b,g+" COMMITTED"):Xb(k.b,g+" COMMITTED with "+a);for(var c=m,d;d=c.e.shift();)d(a,b);c.d=null;c.a=null;c.e=null}var g;this.e&&(b=this.e);this.d&&(c=this.d);var h=u(c)?c:L,k=this,m;if(this.$&&this.$.d&&this.qc(b,h))Xg(this.$,a,d);else{if(this.tb&&this.Aa>=this.tb)throw new rd("Exceed maximum number of transactions of "+this.tb);this.h.transaction(e,
b,h,f)}};r.i=function(a,b,c,d,e){var f=this,g;this.Na(function(c){f.c++;g=Zg(f)+"R"+f.c;H(f.b,g+" BEGIN");b(c,g,function(b,d){f.La=c;g=Zg(f)+"R"+f.c;d?(H(f.b,g+" ERROR"),a.r(b)):(H(f.b,g+" SUCCESS"),a.s(b));f.La=null});b=null;H(f.b,g+" END")},c,d,e)};function Zg(a){return"B"+a.f+"T"+a.Aa}r.toString=function(){return"Parallel:"+this.a+":"+Zg(this)+(this.La?"*":"")};function $g(a,b){Yg.call(this,a,b,"single")}E($g,Yg);$g.prototype.b=J("ydn.db.tr.AtomicParallel");$g.prototype.qc=ca(!1);$g.prototype.i=function(a,b,c,d,e){var f,g,h=new K;h.K(function(a){g=!1;f=a},function(a){g=!0;f=a});$g.A.i.call(this,h,b,c,d,function(b,c){if(!0===g)a.r(f);else if(!1===g)a.s(f);else{var d=new le;a.r(d)}e&&(e(b,c),e=void 0)})};function rg(a){this.e=a;this.a=null;this.c=0}rg.prototype.b=J("ydn.db.tr.Mutex");rg.prototype.M=null;function ah(a,b,c){if(!a.M||!a.mode||c!=a.mode||a.M.length!=b.length)return!1;for(c=0;c<b.length;c++)if(-1==a.M.indexOf(b[c]))return!1;return!0}rg.prototype.G=null;function tg(a){return"B"+a.e+"T"+a.c}rg.prototype.toString=function(){return"Mutex:"+tg(this)+(this.a?"*":"")};function bh(a,b){qg.call(this,a,b)}E(bh,qg);bh.prototype.Ub=function(a,b){var c;a:if(c=this.q,!c.M||!c.mode||b!=c.mode&&(c.mode!=M||b!=L)||a.length>c.M.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.M.indexOf(a[d])){c=!1;break a}c=!0}return c};function ch(a,b){qg.call(this,a,b)}E(ch,qg);ch.prototype.b=J("ydn.db.tr.StrictOverflowSerial");ch.prototype.Ub=function(a,b){return ah(this.q,a,b)};ch.prototype.$b=function(){var a=this.q;return!!a&&ah(a,0<this.a.length?this.a[0].M:null,0<this.a.length?this.a[0].mode:null)};function dh(a,b,c){W.call(this,a,b,c);this.aa=0;a=!0;b="single";c&&(u(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=eh(this,b,a);this.d=this.ua(c,null)}E(dh,W);r=dh.prototype;r.aa=0;r.rc=function(a,b,c,d,e){var f;"readonly"==d?f=L:"readwrite"==d&&(f=M);a=eh(this,a,b,c,f,e);return this.ua(a,null)};r.ua=function(a){return new vg(this,this.c,a)};
function eh(a,b,c,d,e,f){if(c){if("multi"==b)return new bh(a,a.aa++);if("repeat"==b)return new ch(a,a.aa++);if("atomic"==b)return new ug(a,a.aa++);if("single"==b)return new qg(a,a.aa++,f);throw new P('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||"single"==b)return new Yg(a,a.aa++,b,d,e,f);if("atomic"==b)return new $g(a,a.aa++);throw new P('Invalid requestType "'+b+'"');}r.Yc=function(){this.d.e()};
r.Ec=function(a,b,c,d,e){var f=this;this.aa++;var g=L;if(c)if("readwrite"==c)g=M;else if("readonly"!=c)throw new P('Invalid transaction mode "'+c+'"');var h=eh(this,"all",!1,b,g,1),k=this.ua(h,null);null!=b||(b=Qd(this.c));if(w(b)){if(0==b.length)throw new P("number of store names must more than 0");for(var m=0;m<b.length;m++)if(!x(b[m]))throw new P("store name at "+m+" must be string but found "+typeof b[m]);}else throw new P("store names must be an array");var n=a;if(4<arguments.length)var p=Array.prototype.slice.call(arguments,
4),n=function(){var b=Array.prototype.slice.call(arguments),b=b.concat(p);return a.apply(this,b)};I(this.b,"scheduling run in transaction with "+h);h.Na(function(){I(f.b,"executing run in transaction on "+h);n(k);n=null},b,g,d)};function $(a,b,c){dh.call(this,a,b,c)}E($,dh);r=$.prototype;r.ua=function(a){return new wg(this,this.c,a)};r.Gb=function(){var a=this.j();if("indexeddb"==a)return new Pf(this.e,this.c);if("websql"==a)return new ig(this.e,this.c);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new Yf(this.e,this.c);throw new qe("No executor for "+a);};r.rb=function(a,b,c){return this.d.rb(a,b,c)};r.count=function(a,b,c,d){return this.d.count(a,b,c,d)};
r.ya=function(a,b){return this.d.ya(a,b)};r.keys=function(a,b,c,d,e,f){return this.d.keys(a,b,c,d,e,f)};r.C=function(a,b,c,d,e,f){return this.d.C(a,b,c,d,e,f)};r.za=function(a,b,c){return this.d.za(a,b,c)};r.clear=function(a,b,c){return this.d.clear(a,b,c)};r.sb=function(a,b,c){return this.d.sb(a,b,c)};r.toString=function(){var a="Storage:"+this.getName();this.a&&this.a.Ta()&&(a+=" ["+this.j()+"]");return a};function fh(a,b,c){dh.call(this,a,b,c)}E(fh,$);r=fh.prototype;r.Gb=function(){var a=this.j();if("indexeddb"==a)return new Rf(this.e,this.c);if("websql"==a)return new ng(this.e,this.c);if("memory"==a||"userdata"==a||"localstorage"==a||"sessionstorage"==a)return new ag(this.e,this.c);throw new qe("No executor for "+a);};r.ua=function(a){return new Eg(this,this.c,a)};r.Tc=function(a,b,c){return this.d.kc(a,b,c)};r.Uc=function(a,b){return this.d.lc(a,b)};r.map=function(a,b){return this.d.map(a,b)};
r.pb=function(a,b,c){return this.d.pb(a,b,c)};function gh(a){this.a=a}gh.prototype.a=[];
gh.prototype.c=function(a,b){for(var c=[],d=0;d<this.a.length;d++){var e=this.a[d],f="'"===e[0]&&"'"===e[e.length-1];if('"'===e[0]&&'"'===e[e.length-1])e=Va(a,za(e,'"').split(".")),c.push(e);else if(f)c.push(za(e,"'"));else if(x(e))if("true"===e)c.push(!0);else if("false"===e)c.push(!1);else if("Date"===e)c.push(new Date(parseInt(c.pop(),10)));else if("now"===e)c.push(new Date);else if("!"===e)c[c.length-1]=!c[c.length-1];else if("=="===e)c.push(c.pop()==c.pop());else if("==="===e)c.push(c.pop()===
c.pop());else if("!="===e)c.push(c.pop()!=c.pop());else if("!=="===e)c.push(c.pop()!==c.pop());else if("<="===e)c.push(c.pop()<=c.pop());else if("<"===e)c.push(c.pop()<c.pop());else if(">="===e)c.push(c.pop()>=c.pop());else if(">"===e)c.push(c.pop()>c.pop());else if("&"===e)c.push(c.pop()&c.pop());else if("|"===e)c.push(c.pop()|c.pop());else if("?"===e){var e=!!c.pop(),f=c.pop(),g=c.pop(),e=e?f:g;c.push(e)}else"+"===e?c.push(c.pop()+c.pop()):"-"===e?c.push(c.pop()-c.pop()):"*"===e?c.push(c.pop()*
c.pop()):"/"===e?c.push(c.pop()/c.pop()):"%"===e?c.push(c.pop()%c.pop()):"at"===e?(f=c.pop(),e=c.pop(),c.push(e[f])):"of"===e?(f=c.pop(),e=c.pop(),e=v(e)?e.indexOf(f):-1,c.push(e)):"in"===e?(f=c.pop(),e=c.pop(),e=v(e)?0<=e.indexOf(f):!1,c.push(e)):"abs"===e?c[c.length-1]=Math.abs(c[c.length-1]):"$"==e[0]&&/^\$\d$/.test(e)?(e=parseInt(e.match(/^\$(\d)$/)[1],10),c.push(arguments[e])):c.push(parseFloat(e));else c.push(e)}return c[0]};
gh.prototype.d=function(){return function(){var a=2<arguments.length?Array.prototype.slice(arguments,2):void 0;return gh.prototype.c.apply(null,a)}};gh.prototype.toJSON=function(){return{Tokens:ge(R(this.a))}};function hh(a){if(!x(a))throw new Td;this.H=a;ih(this,a);this.Qa=""}r=hh.prototype;r.H="";r.Ra=L;r.cc=NaN;r.fc=NaN;r.Ob=!1;r.Qa="";
function ih(a,b){var c=b.split(/\sFROM\s/i);if(2!=c.length)throw new ve("FROM required.");var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);if(3!=c.length)throw new ve("Unable to parse: "+b);a.d=c[1].toUpperCase();if("SELECT"==a.d)a.Ra=L;else if("INSERT"==a.d)a.Ra=M;else if("UPDATE"==a.d)a.Ra=M;else if("DELETE"==a.d)a.Ra=M;else throw new ve("Unknown SQL verb: "+a.d);var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.e=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,
"").trim()):a.e=void 0;"("==c.charAt(0)&&(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-1):new ve("missing closing parentheses"));a.m=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.a=d.substring(c),d=d.substring(0,c)):a.a="";c=d.search(/WHERE/i);0<c?(a.f=d.substring(c+6).trim(),d=d.substring(0,c)):a.f="";a.c=d.trim().split(",").map(function(a){a=za(a,'"');a=za(a,"'");return a.trim()})}
function jh(a,b){if(b){for(var c=0;c<b.length;c++)a.H=a.H.replace("?",b[c]);ih(a,a.H)}a.g=kh(a);if(!a.g)return a.Qa;var c=a.a.length,d=/OFFSET\s+(\d+)/i.exec(a.a);d&&(a.fc=parseInt(d[1],10),c=a.a.search(/OFFSET/i));if(d=/LIMIT\s+(\d+)/i.exec(a.a))a.cc=parseInt(d[1],10),d=a.a.search(/LIMIT/i),d<c&&(c=d);(c=/ORDER BY\s+(.+)/i.exec(a.a.substr(0,c)))?(c=c[1].trim(),(d=c.match(/(ASC|DESC)/i))?(a.Ob="DESC"==d[0].toUpperCase(),c=c.replace(/\s+(ASC|DESC)/i,"")):a.Ob=!1,a.j=za(za(c,'"'),"'")):a.j=void 0;return""}
function lh(a){if("*"==a.m)return null;a=a.m.split(",");return a=a.map(function(a){return za(a.trim(),'"')})}r.toJSON=function(){return{sql:this.H}};
function kh(a){function b(a){return Na(c,function(b){return b.ja==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.f.length)for(var e=a.f.split("AND"),f=0;f<e.length;f++){var g=e[f],h=d.exec(g);if(h){var k=h[1].trim(),k=za(k,'"'),k=za(k,"'");if(0<k.length){var m=h[3].trim(),m=0==m.lastIndexOf('"',0)?za(m,'"'):0==m.lastIndexOf("'",0)?za(m,"'"):parseFloat(m),h=new yf(k,h[2],m),k=b(k);if(0<=k){if(c[k]=c[k].xb(h),!c[k])return a.Qa='where clause "'+g+'" conflict',null}else c.push(h)}else return a.Qa='Invalid clause "'+
g+'"',null}else return a.Qa='Invalid clause "'+g+'"',null}return c}r.toString=function(){return"query:"+this.H};function mh(a,b){this.sql=b;this.a=a}mh.prototype.b=J("ydn.db.sql.req.nosql.Node");mh.prototype.toJSON=function(){return{sql:this.sql}};mh.prototype.toString=ca("idb.Node:");
mh.prototype.Sb=function(a,b,c,d){var e=Qa(this.sql.c)[0],f=this.sql.g,g=this.sql.cc,g=isNaN(g)?100:g,h=this.sql.fc,h=isNaN(h)?0:h,k=this.sql.j,m=lh(this.sql),n=null,p=this.sql.Ob;if(0==f.length)n=null;else if(1==f.length)n=id(f[0].a);else throw new pd("too many conditions.");var s=c;null===m||(s=function(a,b){if(b)c(a,!0);else{var d=a.map(function(a){var b=m.length;if(1==b)return oc(a,m[0]);for(var c={},d=0;d<b;d++)c[m[d]]=oc(a,m[d]);return c});c(d)}});var f=0<f.length?f[0].ja:void 0,q=b+" executing on"+
e;f&&(q+=":"+f);q+=" "+ld(n);H(this.b,q);k&&k!=this.a.keyPath?d.Ia(a,b,s,e,k,n,p,g,h,!1):u(f)&&f!=this.a.keyPath?d.Ia(a,b,s,e,f,n,p,g,h,!1):d.Ja(a,b,s,e,n,p,g,h)};function nh(a,b){mh.call(this,a,b)}E(nh,mh);
nh.prototype.Sb=function(a,b,c,d){var e,f=Qa(this.sql.c)[0],g=this.sql.g,h=null;if(0==g.length)h=null;else if(1==g.length)h=id(g[0].a);else throw new pd("too many conditions.");var k=this.sql.e,g=0<g.length?g[0].ja:void 0,m=b+" executing "+k+" on "+f;g&&(m+=":"+g);m+=" "+ld(h);H(this.b,m);if("COUNT"==k)h?d.oa(a,b,c,f,h,g,!1):d.oa(a,b,c,f,null,void 0,!1);else{var n,m=lh(this.sql);if(!m||0==m.length)throw new Zd("field name require for reduce operation: "+k);m=m[0];if("MIN"==k)n=oh(m);else if("MAX"==
k)n=ph(m);else if("AVG"==k)e=0,n=qh(m);else if("SUM"==k)e=0,n=rh(m);else throw new Ud(k);var p;p=u(g)?new Cf(f,g,h):new Bf(f,h);var s=Df(p,a,b,d);s.f=function(a){c(a,!0)};var q=0;s.e=function(a){null!=a?(e=n(p.c?s.P():s.ba(),e,q),s.advance(1),q++):c(e)}}};function qh(a){return function(b,c,d){u(c)||(c=0);return(c*d+b[a])/(d+1)}}function rh(a){return function(b,c){return c+b[a]}}function oh(a){return function(b,c){var d=b[a];return u(c)?c<d?c:d:d}}
function ph(a){return function(b,c){var d=b[a];return u(c)?c>d?c:d:d}};function sh(a,b){Ef.call(this,a,b)}E(sh,Rf);sh.prototype.b=J("ydn.db.sql.req.IndexedDb");sh.prototype.executeSql=function(a,b,c,d,e){if(e=jh(d,e))throw new ve(e);e=Qa(d.c);if(1==e.length){var f=S(this.a,e[0]);if(!f)throw new se(e[0]);var g=lh(d);if(g)for(var h=0;h<g.length;h++)if(!Jd(f,g[h]))throw new se('Index "'+g[h]+'" not found in '+e[0]);(d.e?new nh(f,d):new mh(f,d)).Sb(a,b,c,this)}else throw new Ud(d.H);};function th(a,b){this.sql=b;this.c=a;this.a=lh(b)}th.prototype.b=J("ydn.db.sql.req.websql.Node");th.prototype.toJSON=function(){return{sql:this.sql.H}};th.prototype.toString=ca("websql.Node:");function uh(a,b){if(a.a){if(1==a.a.length){if(A(b))return Va(b,a.a[0]);return}for(var c={},d=0;d<a.a.length;d++)c[a.a[d]]=Va(b,a.a[d]);return c}return dg(b,a.c)}
th.prototype.oc=function(a,b,c){var d=this,e=[];b.executeSql(this.sql.H,c,function(b,c){for(var h=c.rows.length,k=0;k<h;k++){var m=c.rows.item(k);if(A(m))var n=uh(d,m);e.push(n)}a(e)},function(b,c){G(d.b,"Sqlite error: "+c.message);a(c,!0);return!0})};function vh(a,b){th.call(this,a,b)}E(vh,th);vh.prototype.oc=function(a,b,c){var d=this;b.executeSql(this.sql.H,c,function(b,c){var d=c.rows.length;if(1==d)d=mg(c.rows.item(0)),a(d);else if(0==d)a(void 0);else throw new qe;},function(b,c){G(d.b,"Sqlite error: "+c.message);a(c,!0);return!0})};function wh(a,b){Ef.call(this,a,b)}E(wh,ng);wh.prototype.b=J("ydn.db.sql.req.WebSql");wh.prototype.executeSql=function(a,b,c,d,e){b=Qa(d.c);if(1==b.length){var f=S(this.a,b[0]);if(!f)throw new se(b[0]);var g=lh(d);if(g)for(var h=0;h<g.length;h++)if(!Jd(f,g[h]))throw new se('Index "'+g[h]+'" not found in '+b[0]);(d.e?new vh(f,d):new th(f,d)).oc(c,a,e)}else throw new Ud(d.H);};function xh(a,b){Ef.call(this,a,b)}E(xh,ag);xh.prototype.b=J("ydn.db.sql.req.SimpleStore");xh.prototype.executeSql=function(a,b,c,d,e){if(e=jh(d,e))throw new ve(e);e=Qa(d.c);if(1==e.length){var f=S(this.a,e[0]);if(!f)throw new se(e[0]);var g=lh(d);if(g)for(var h=0;h<g.length;h++)if(!Jd(f,g[h]))throw new P('Index "'+g[h]+'" not found in '+e[0]);(d.e?new nh(f,d):new mh(f,d)).Sb(a,b,c,this)}else throw new pd(d.H);};function yh(a,b,c){vg.call(this,a,b,c)}E(yh,Eg);yh.prototype.executeSql=function(a,b){for(var c=jc(),d=new hh(a),e=Qa(d.c),f=0;f<e.length;f++){var g=S(this.c,e[f]);if(!g)throw new P("store: "+g+" not exists.");}var h=this;H(this.b,"executeSql: "+a+" params: "+b);this.a.i(c,function(a,c,e){Z(h).executeSql(a,c,e,d,b||[])},Qa(d.c),d.Ra);return c};function zh(a,b,c){dh.call(this,a,b,c)}E(zh,fh);zh.prototype.Gb=function(){var a=this.j();if("indexeddb"==a)return new sh(this.e,this.c);if("websql"==a)return new wh(this.e,this.c);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new xh(this.e,this.c);throw new qe("No executor for "+a);};zh.prototype.ua=function(a){return new yh(this,this.c,a)};zh.prototype.executeSql=function(a,b){return this.d.executeSql(a,b)};function Ah(a,b,c){dh.call(this,a,b,c)}E(Ah,zh);function Bh(a,b){Mf.call(this,a,b)}E(Bh,Mf);Bh.prototype.c=ca(!1);Bh.prototype.d=function(a,b){function c(b){u(a[b])?(e=!1,d[b]=!0):(d[b]=!1,0<=b-1&&c(b-1))}var d=[],e=!0;c(a.length-1);e&&(d=[]);return Nf(this,d,b)};function Ch(a,b){Mf.call(this,a,b);this.e=a instanceof Jf&&!!a.va}E(Ch,Mf);Ch.prototype.b=J("ydn.db.algo.ZigzagMerge");Ch.prototype.e=!1;Ch.prototype.c=function(a,b){var c=Ch.A.c.call(this,a,b);if(this.e){var d=a[0].R().split(", ");if(1<d.length){if(d[d.length-1]!=this.a.va)throw new Zd("Output streamer projection field must be same as postfix field in the iterator");}else G(this.b,"Unable to check correctness of output streamer.")}return c};
Ch.prototype.d=function(a,b){function c(a,b){var c=a.slice(0,a.length-1);c.push(b);return c}var d=[];if(0==a.length||null==a[0]||null==a[0])return[];for(var e=!0,f=0,g=a[f][a[f].length-1],h=[],k=1;k<a.length;k++)if(null!=a[k]){var m=a[k][a[k].length-1],n=Q(g,m);h[k]=n;1===n?e=!1:-1===n&&(e=!1,g=m,f=1)}else return[];if(e){for(e=0;e<a.length;e++)null!=a[e]&&(d[e]=!0);this.a&&(this.e?this.a.push(b[0],g):this.a.push(b[0]));return d}if(0==f)for(e=1;e<a.length;e++)1===h[e]&&(d[e]=c(a[e],g));else for(e=
0;e<a.length;e++)e!=f&&null!=a[e]&&1===Q(g,a[e][a[e].length-1])&&(d[e]=c(a[e],g));return{"continue":d}};function Dh(a,b){Mf.call(this,a,b)}E(Dh,Mf);Dh.prototype.c=ca(!1);Dh.prototype.d=function(a,b){var c=[],d=b[0];if(null==d)return[];for(var e=!0,f=!1,g=d,h=[],k=1;k<a.length;k++)if(null!=b[k]){var m=Q(d,b[k]);h[k]=m;1===m?e=!1:-1===m&&(e=!1,f=!0,1===Q(b[k],g)&&(g=b[k]))}else e=!1,f=!0;if(e)for(f=0;f<a.length;f++)null!=b[f]&&(c[f]=!0);else if(f)for(f=0;f<a.length;f++)null!=b[f]&&1===Q(g,b[f])&&(c[f]=g);else for(f=1;f<a.length;f++)1===h[f]&&(c[f]=d);return e?(this.f++,this.a&&this.a.push(g),c):{continuePrimary:c}};C("ydn.db.Storage",Ah);C("ydn.db.algo.NestedLoop",Bh);C("ydn.db.algo.ZigzagMerge",Ch);C("ydn.db.algo.SortedMerge",Dh);K.prototype.done=K.prototype.Y;K.prototype.fail=K.prototype.Vb;K.prototype.then=K.prototype.K;K.prototype.always=K.prototype.sc;ad.prototype.addEventListener=ad.prototype.Bb;C("ydn.db.con.Storage",W);W.prototype.getType=W.prototype.j;W.prototype.setName=W.prototype.B;W.prototype.getName=W.prototype.getName;W.prototype.getSchema=W.prototype.Cc;W.prototype.transaction=W.prototype.transaction;W.prototype.close=W.prototype.ib;C("ydn.db.version","0.6.7");C("ydn.db.deleteDatabase",function(a,b){je&&((!b||"indexeddb"==b)&&je&&"deleteDatabase"in je)&&je.deleteDatabase(a);!ga(t.openDatabase)||b&&"websql"!=b||Ae(a);b&&"localstorage"!=b||pf(a);b&&"sessionstorage"!=b||rf(a)});
Gg.prototype.name=Gg.prototype.name;Gg.prototype.getVersion=Gg.prototype.Wc;Gg.prototype.getOldVersion=Gg.prototype.wc;Gg.prototype.getError=Gg.prototype.Vc;dh.prototype.branch=dh.prototype.rc;dh.prototype.run=dh.prototype.Ec;vg.prototype.abort=vg.prototype.e;dh.prototype.abort=dh.prototype.Yc;$.prototype.branch=$.prototype.rc;$.prototype.add=$.prototype.rb;$.prototype.get=$.prototype.ya;$.prototype.values=$.prototype.C;$.prototype.put=$.prototype.za;$.prototype.clear=$.prototype.clear;$.prototype.remove=$.prototype.sb;$.prototype.count=$.prototype.count;wg.prototype.add=wg.prototype.rb;wg.prototype.get=wg.prototype.ya;wg.prototype.values=wg.prototype.C;wg.prototype.put=wg.prototype.za;wg.prototype.clear=wg.prototype.clear;wg.prototype.remove=wg.prototype.sb;wg.prototype.count=wg.prototype.count;
C("ydn.db.cmp",Q);C("ydn.db.Key",ed);ed.prototype.id=ed.prototype.vc;ed.prototype.parent=ed.prototype.Oc;ed.prototype.storeName=ed.prototype.Pc;C("ydn.db.KeyRange",O);O.upperBound=O.upperBound;O.lowerBound=O.lowerBound;O.bound=O.bound;O.only=O.only;O.starts=hd;Fg.prototype.store_name=Fg.prototype.d;Fg.prototype.getStoreName=Fg.prototype.f;Ag.prototype.name=Ag.prototype.name;Ag.prototype.getKey=Ag.prototype.g;Ag.prototype.getValue=Ag.prototype.j;yg.prototype.name=yg.prototype.name;
yg.prototype.getKeys=yg.prototype.fa;yg.prototype.getValues=yg.prototype.cb;fh.prototype.scan=fh.prototype.Uc;fh.prototype.map=fh.prototype.map;fh.prototype.reduce=fh.prototype.pb;fh.prototype.open=fh.prototype.Tc;Eg.prototype.scan=Eg.prototype.lc;Eg.prototype.map=Eg.prototype.map;Eg.prototype.reduce=Eg.prototype.pb;Eg.prototype.open=Eg.prototype.kc;sf.prototype.getKey=sf.prototype.jc;sf.prototype.getPrimaryKey=sf.prototype.P;sf.prototype.getValue=sf.prototype.ba;sf.prototype.update=sf.prototype.update;sf.prototype.clear=sf.prototype.clear;C("ydn.math.Expression",gh);
gh.prototype.evaluate=gh.prototype.c;gh.prototype.compile=gh.prototype.d;gh.parseRpn=function(a){return new gh(a.match(/[^\s"']+|"[^"]*"|'[^']*'/g))};gh.parseInfix=function(){throw new Vd("Too lazy to learn Dutch in Shunting Yard station, we speak Polish here.");};C("ydn.db.Iterator",V);C("ydn.db.KeyCursors",zf);C("ydn.db.ValueCursors",Bf);C("ydn.db.Cursors",Af);C("ydn.db.IndexValueCursors",Cf);V.prototype.count=V.prototype.count;V.prototype.getState=V.prototype.Zb;V.prototype.getKeyRange=V.prototype.Ic;
V.prototype.getIndexName=V.prototype.R;V.prototype.getStoreName=V.prototype.Kc;V.prototype.isReversed=V.prototype.mb;V.prototype.isUnique=V.prototype.Pa;V.prototype.isKeyIterator=V.prototype.Lc;V.prototype.isIndexIterator=V.prototype.xc;V.prototype.getPrimaryKey=V.prototype.Jc;V.prototype.getKey=V.prototype.Hc;V.prototype.resume=V.prototype.Dc;V.prototype.reset=V.prototype.Mc;V.prototype.reverse=V.prototype.Nc;zf.where=function(a,b,c,d,e){return new zf(a,od(b,c,d,e))};
Bf.where=function(a,b,c,d,e){return new Bf(a,od(b,c,d,e))};Af.where=function(a,b,c,d,e,f){return new Af(a,b,od(c,d,e,f))};Cf.where=function(a,b,c,d,e,f){return new Cf(a,b,od(c,d,e,f))};C("ydn.db.Streamer",Jf);Jf.prototype.push=Jf.prototype.push;Jf.prototype.collect=Jf.prototype.Qc;Jf.prototype.setSink=Jf.prototype.Gc;var Eh=new function(){this.a=oa()};function Fh(a){this.e=a||"";this.f=Eh}Fh.prototype.a=!0;Fh.prototype.c=!1;function Gh(a){a=new Date(a.g);return Hh(a.getFullYear()-2E3)+Hh(a.getMonth()+1)+Hh(a.getDate())+" "+Hh(a.getHours())+":"+Hh(a.getMinutes())+":"+Hh(a.getSeconds())+"."+Hh(Math.floor(a.getMilliseconds()/10))}function Hh(a){return 10>a?"0"+a:String(a)}function Kh(a,b){var c=(a.g-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function Lh(a){Fh.call(this,a)}E(Lh,Fh);Lh.prototype.c=!0;
Lh.prototype.d=function(a){var b;switch(a.f.value){case Kb.value:b="dbg-sh";break;case Lb.value:b="dbg-sev";break;case Mb.value:b="dbg-w";break;case Nb.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.e," ");this.a&&c.push("[",Gh(a),"] ");c.push("[",ya(Kh(a,this.f.a)),"s] ");c.push("[",sa(a.d),"] ");c.push('<span class="',b,'">',ra(ya(sa(a.e))));this.c&&a.c&&c.push("<br>",ra(ya(a.a||"")));c.push("</span><br>");return c.join("")};function Mh(a){Fh.call(this,a)}E(Mh,Fh);
Mh.prototype.d=function(a){var b=[];b.push(this.e," ");this.a&&b.push("[",Gh(a),"] ");b.push("[",Kh(a,this.f.a),"s] ");b.push("[",a.d,"] ");b.push(a.e,"\n");this.c&&a.c&&b.push(a.a,"\n");return b.join("")};function Nh(){this.f=B(this.g,this);this.a=new Mh;this.a.a=!1;this.c=this.a.c=!1;this.d="";this.e={}}Nh.prototype.g=function(a){if(!this.e[a.d]){var b=this.a.d(a),c=Oh;if(c)switch(a.f){case Kb:Ph(c,"info",b);break;case Lb:Ph(c,"error",b);break;case Mb:Ph(c,"warn",b);break;default:Ph(c,"debug",b)}else window.opera?window.opera.postError(b):this.d+=b}};var Oh=window.console;function Ph(a,b,c){if(a[b])a[b](c);else a.log(c)};var Qh,Rh=!F||F&&9<=Ab;!nb&&!F||F&&F&&9<=Ab||nb&&xb("1.9.1");F&&xb("9");function Sh(a,b){var c;c=a.className;c=x(c)&&c.match(/\S+/g)||[];for(var d=Ra(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=Ga(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};function Th(a,b){Ua(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Uh?a.setAttribute(Uh[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Uh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Vh(a,b,c){function d(c){c&&b.appendChild(x(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!w(f)||A(f)&&0<f.nodeType?d(f):Ha(Wh(f)?Qa(f):f,d)}}function Wh(a){if(a&&"number"==typeof a.length){if(A(a))return"function"==typeof a.item||"string"==typeof a.item;if(ga(a))return"function"==typeof a.item}return!1}function Xh(a){this.a=a||t.document||document}
function Yh(a,b){var c;c=a.a;var d=b&&"*"!=b?b.toUpperCase():"";c.querySelectorAll&&c.querySelector&&d?c=c.querySelectorAll(d+""):c=c.getElementsByTagName(d||"*");return c}
Xh.prototype.c=function(a,b,c){var d=this.a,e=arguments,f=e[0],g=e[1];if(!Rh&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',sa(g.name),'"');if(g.type){f.push(' type="',sa(g.type),'"');var h={};Xa(h,g);delete h.type;g=h}f.push(">");f=f.join("")}f=d.createElement(f);g&&(x(g)?f.className=g:v(g)?Sh.apply(null,[f].concat(g)):Th(f,g));2<e.length&&Vh(d,f,e);return f};
Xh.prototype.contains=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function Zh(a){this.f=B(this.g,this);this.c=new Lh;this.d=this.c.a=!1;this.a=a;this.e=this.a.ownerDocument||this.a.document;var b=(a=this.a)?new Xh(9==a.nodeType?a:a.ownerDocument||a.document):Qh||(Qh=new Xh),c=null;F?(a=c=b.a.createStyleSheet(),F?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}"):(a=Yh(b,"head")[0],a||(c=Yh(b,"body")[0],a=b.c("head"),c.parentNode.insertBefore(a,c)),b=c=b.c("style"),F?b.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
b.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}",a.appendChild(c));this.a.className+=" logdiv"}
Zh.prototype.g=function(a){var b=100>=this.a.scrollHeight-this.a.scrollTop-this.a.clientHeight,c=this.e.createElement("div");c.className="logmsg";c.innerHTML=this.c.d(a);this.a.appendChild(c);b&&(this.a.scrollTop=this.a.scrollHeight)};Zh.prototype.clear=function(){this.a.innerHTML=""};var $h=null,ai=null;J("ydn.debug");C("ydn.debug.log",function(a,b,c){if(z(b))b=new Jb("log",b);else if(x(b)){b=b.toUpperCase();if(!Ub){Ub={};for(var d=0,e;e=Tb[d];d++)Ub[e.value]=e,Ub[e.name]=e}b=Ub[b]||null}else b=Pb;J(a||"ydn").c=b;u(c)?ai||(a=ai=new Zh(c),!0!=a.d&&(c=ac(),b=a.f,c.a||(c.a=[]),c.a.push(b),a.d=!0),ac().c=Mb):$h||ai||(a=$h=new Nh,!0!=a.c&&(c=ac(),b=a.f,c.a||(c.a=[]),c.a.push(b),a.c=!0),ac().c=Mb)});W.prototype.db=W.prototype.Rc;})();




            })(jQuery);
        